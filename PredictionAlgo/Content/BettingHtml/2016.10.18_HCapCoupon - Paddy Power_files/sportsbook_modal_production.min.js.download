var thisDomain=document.location.host;document.domain=thisDomain.indexOf("paddypower")>-1?"paddypower.com":thisDomain.indexOf("localhost")>-1?"contentadmin.localhost":"paddypower.com";var customLightBox=function(){return{mapping:{},loadConfig:function(config){try{this.mapping=$j.parseJSON(config)}catch(e){return false}return true},open:function(){$j("#newModal").show();$j("#fade").show()},close:function(){$j("#newModal").hide();$j("#fade").hide()},setCookie:function(){var exdate=new Date;exdate.setDate(exdate.getDate()+365);var timestamp=Math.round((new Date).getTime()/1e3);document.cookie="com.paddypower.modal.displayed="+timestamp+";expires="+exdate.toUTCString()+";path=/"+";domain="+document.domain},checkCookie:function(name){var parts=document.cookie.split(name+"=");if(parts.length==2)return parts.pop().split(";").shift()},overlay_css:{display:"none",position:"fixed",top:"0%",left:"0%",width:"100%",height:"100%",backgroundColor:"black","z-index":"9999",opacity:"0.8"},modal_css:{display:"none",position:"absolute",top:"25%",left:"25%",width:"823px",height:"500px",padding:"16px",border:"0px solid #fff","background-color":"white","z-index":"99999",overflow:"hidden"},clearProtocol:function(url){return url.replace(/.*?:\/\//g,"//")},clearCache:function(url){var unixTimestamp=(new Date).getTime();return url+"?ord="+unixTimestamp},determineModalURL:function(countryCode,euro_url,sterling_url){if(typeof countryCode!="undefined"&&countryCode.toLowerCase()=="ie"){return euro_url}else{return sterling_url}},determineModalCampaign:function(cid){if(!this.mapping.length){return false}for(var i in this.mapping){var setPattern=this.mapping[i].url_pattern;var urlPattern=new RegExp(setPattern);var pageUrl=document.location.href;if(!setPattern||!setPattern.length||typeof setPattern=="undefined"){continue}if(typeof setPattern!="undefined"&&cid==this.mapping[i].cid&&urlPattern.test(pageUrl)){return this.mapping[i]}}for(var i in this.mapping){var setPattern=this.mapping[i].url_pattern;if(typeof setPattern!="undefined"&&setPattern.length){continue}if(cid==this.mapping[i].cid){return this.mapping[i]}}return false},checkCampaignConfig:function(modalConfig){if(typeof modalConfig.image_url=="undefined"||typeof modalConfig.link_url=="undefined"||!modalConfig.image_url.length||!modalConfig.link_url.length){return false}return true},checkModalCookie:function(cookieValue,modalConfig){var expiry=typeof modalConfig.expires!="undefined"?modalConfig.expires*1*3600:0;if(typeof cookieValue=="undefined"||!cookieValue){return true}var currentTimestamp=Math.round((new Date).getTime()/1e3);var cookieExpiry=cookieValue*1+expiry;return currentTimestamp-cookieExpiry>0},prepare:function(modalConfig){var overlay=document.createElement("div");overlay.setAttribute("id","fade");$j(overlay).css(this.overlay_css);$j(document.body).append(overlay);$j(overlay).hide();var modal=document.createElement("div");$j(modal).attr("id","newModal");$j(modal).addClass("new-modal-window");if(modalConfig.width&&modalConfig.height){this.modal_css.width=modalConfig.width+"px";this.modal_css.height=modalConfig.height+"px"}$j(modal).css(this.modal_css);var viewportWidth=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;var modalLeft=viewportWidth/2-modalConfig.width/2-16;var viewportHeight=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;var modalTop=viewportHeight/2-modalConfig.height/2-16;$j(modal).css("left",modalLeft+"px");$j(modal).css("top",modalTop+"px");var closeBtnCss="position: absolute; top: 29px; left: "+modalConfig.width+"px; margin-left: -30px; cursor: pointer; width: 43px; height: 43px";var image_url=this.clearProtocol(modalConfig.image_url);image_url=this.clearCache(image_url);$j(modal).html('<div style="padding:0;margin:0"><a href="'+this.addAffId(modalConfig.link_url)+'" style="padding:0;margin:0"><img style="border:0" src="'+image_url+'"></a>'+'<a href="http://i.ppstatic.com/popup/cond/B10G30-3x10-Conditions.html" onclick="window.open(this.href, \'_blank\', \'toolbar=yes,scrollbars=yes,resizable=yes,width=400,height=600\');return false;" style="position: absolute;width: 110px;height: 40px;left: 15px;bottom: 10px;z-index: 1000;text-indent: -9999px;">&nbsp;</a>'+"</div>");$j(modal).append('<img src="http://i.ppstatic.com/content/landingpages/close-button.png" style="'+closeBtnCss+'" onclick="newModalWindow.close()" alt="close" title="close" />');$j(document.body).append(modal);$j(modal).hide()},launch:function(modalConfig){this.prepare(modalConfig);var modal=this;setTimeout(function(){modal.open()},500)},addAffId:function(url){var obj=this,AFF_ID,params;AFF_ID=obj.checkCookie("AFF_ID");if(AFF_ID==""||AFF_ID=="undefined"||AFF_ID==undefined||AFF_ID=="1"){AFF_ID="1"}else{return url}if(url.indexOf("?")!=-1){params="&"}else{params="?"}params=params+"AFF_ID="+AFF_ID;return url+params}}};if(typeof $j=="undefined"){$j=$}$j(document).ready(function(){window.newModalWindow=new customLightBox;if(document.referrer.indexOf("content.paddypower.com/ppc-pages")>-1){return false}var cookieValue=newModalWindow.checkCookie("com.paddypower.modal.displayed");newModalWindow.setCookie();var custPrefs=newModalWindow.checkCookie("cust_prefs");var campaignId=newModalWindow.checkCookie("CID");var countryCode=newModalWindow.checkCookie("CC");if(!campaignId||!campaignId.length||typeof campaignId=="undefined"||campaignId=="-1"||campaignId=="0"){if(typeof document.referrer==="undefined"||document.referrer===""){campaignId="direct"}else{campaignId="-1"}}var config='[{"MIGX_id":"4","name":"OMG-B10G30-BVI-Refresh-Modal-NC","cid":"327","url_pattern":"","euro_url":"//i.ppstatic.com/content/landingpages/ConversionBVIRefresh/828x500_Modal_Bet10_Get30_euro.jpg","sterling_url":"//i.ppstatic.com/content/landingpages/ConversionBVIRefresh/828x500_Modal_Bet10_Get30_gbp.jpg","link_url":"https://content.paddypower.com/registration/?action=go_registration_iframe","mode":"new","expires":"24","width":"830","height":"495"},{"MIGX_id":"5","name":"OMG-B10G30-BVI-Refresh-Modal-DirectNew","cid":"direct","url_pattern":"","euro_url":"//i.ppstatic.com/content/landingpages/ConversionBVIRefresh/828x500_Modal_Bet10_Get30_euro.jpg","sterling_url":"//i.ppstatic.com/content/landingpages/ConversionBVIRefresh/828x500_Modal_Bet10_Get30_gbp.jpg","link_url":"https://content.paddypower.com/registration/?action=go_registration_iframe","mode":"new","expires":"24","width":"830","height":"495"}]';if(!newModalWindow.loadConfig(config)){return false}if(!(modalConfig=newModalWindow.determineModalCampaign(campaignId))){return false}if(!(modalConfig.image_url=newModalWindow.determineModalURL(countryCode,modalConfig.euro_url,modalConfig.sterling_url))){return false}if(!newModalWindow.checkModalCookie(cookieValue,modalConfig)){return false}if(!newModalWindow.checkCampaignConfig(modalConfig)){return false}if(modalConfig.mode=="both"||modalConfig.mode=="existing"&&typeof custPrefs!="undefined"||modalConfig.mode=="returningnew"&&typeof cookieValue!="undefined"&&typeof custPrefs=="undefined"||modalConfig.mode=="new"&&typeof custPrefs=="undefined"){newModalWindow.launch(modalConfig)}});