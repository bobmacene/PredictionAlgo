function BS_Fraction(num,den){this.num=num;this.den=den;this.Equals=function(num,den){return(this.num==num&&this.den==den)};this.Decimal=function(){if(this.den==0)return Number.NaN;return this.num/this.den}}
function BS_Seln(){this.price=new BS_Fraction(null,null);this.prev_price=new BS_Fraction(null,null);this.hcap=null;this.prev_hcap=null;this.hcap_str=null}
function BS_Cookie(){this.leg=new Object();this.leg_nums=new Array();this.combi_type=new Array();this.combi=new Array();this.esc_grouping=''}
function BS_ErrorMessage(id,msg){this.id=id;this.message=msg};var SELN=new Array(),COOKIE=new BS_Cookie(),BS_ERR_MSG=new Array()
function BS_js_subst(str,obj){var out,mtch,i,mS,mE,vname;out="";i=0;vname_re=/\$\{?([A-Za-z]\w*)\}?/g;while((mtch=vname_re.exec(str))!=null){mS=mtch.index;out=out+str.substring(i,mS);vname=mtch[1];if(obj&&obj[vname]){out=out+obj[vname];if(vname=="price"&&obj.price_type&&obj.price_type=='G'&&obj.g_price_checked&&obj.g_price_checked=='Y'&&document.getElementById('allow_gp_js').value!='N')out=out+' ('+betslipbody.msg.BS_GUARANTEED_PRICE+')'};i=vname_re.lastIndex};out=out+str.substring(i);return out};var bir_url=null,bir_req_id=null,bir_poll_interval=null,bir_req_poll_int=null,bir_req_tout_int=null,playing_bir_confirm=0,bir_is_timeout=0,bad_resp_count=0,fast_bet=true
function BIR_auto_poll(_bir_req_id,poll_interval,timeout){set_cookie("BIR_REQ_ID",_bir_req_id,"","/");set_cookie("POSSIBLE_PLACED_BET","","","/");playing_bir_confirm=1;BS_open_betslip();if(location.protocol=="https:"){bir_url=betslipbody.url.SCGI_URL}else bir_url=betslipbody.url.CGI_URL;var fastbet_cookie=get_cookie(betslipbody.cookie_info.BET_FAST_BET_COOKIE_NAME);if(fastbet_cookie==null||fastbet_cookie=='')fast_bet=false;bir_req_id=_bir_req_id;bir_poll_interval=poll_interval;bir_is_timeout=0;if(bir_req_tout_int!=null)clearTimeout(bir_req_tout_int);if(bir_req_poll_int!=null)clearInterval(bir_req_poll_int);bir_req_tout_int=setTimeout('BIR_timeout()',timeout);bir_req_poll_int=setInterval('BIR_poll_bet_status(fast_bet)',bir_poll_interval)}
function BIR_timeout(){bir_is_timeout=1;clearInterval(bir_req_poll_int);set_cookie("BIR_REQ_ID","","","/");BS_open_betslip();BS_display_error(betslipheader.msg.BS_TIMEOUT_TITLE,betslipheader.msg.BS_TIMEOUT_TXT);bad_resp_count=0}
function BIR_poll_bet_status(fast_bet){var url=bir_url+'?action=get_bir_req_status&bir_req_id='+bir_req_id;if(fast_bet)url=url+'&bir_fast_bet=1';var pttn=/&dcc_pmt_id=([^&]*)/,dcc_pmt_id_match=window.location.search.match(pttn);if(dcc_pmt_id_match&&dcc_pmt_id_match[1])url=url+'&dcc_pmt_id='+dcc_pmt_id_match[1];try{$j.ajax({url:url,type:'GET',dataType:'text',error:function(){set_cookie("BIR_REQ_ID","","","/");BS_display_error(betslipheader.msg.BS_ERROR_TITLE,betslipheader.msg.BS_ERROR_TXT+' (1)');return false},success:function(text){var ret_arr=text.match(/^([A-Z]+):?(.*)/);if(ret_arr==null){if(bad_resp_count>0){clearTimeout(bir_req_tout_int);bir_req_tout_int=null;set_cookie("BIR_REQ_ID","","","/");var ret="BAD_RESPONSE - "+text;bad_resp_count=0}else{var ret="PENDING";bad_resp_count++}}else{var ret=ret_arr[1],html=text.replace(/^([A-Z]+):?/,"")};if(ret=='PENDING'){return false}else if(ret=='RECEIPT'){clearInterval(bir_req_poll_int);clearTimeout(bir_req_tout_int);playing_bir_confirm=0;bir_req_tout_int=null;bir_req_poll_int=null;set_cookie("BIR_REQ_ID","","","/");document.getElementById('betSlipBodyMembrane').innerHTML=html;vsize_betslip();bad_resp_count=0;enable_fastbet_buttons_upd_cookie();BS_refresh_my_bets();BS_post_placement_callback();var onload_func_elem=document.getElementById("onload_func");if(onload_func_elem)if(onload_func_elem.value!="")eval(onload_func_elem.value);if(typeof livebetting!='undefined'&&livebetting==1)resize_betslip(livebetting_base_url);return false}else if(ret=='OVERRIDE'){clearInterval(bir_req_poll_int);clearTimeout(bir_req_tout_int);playing_bir_confirm=0;bir_req_tout_int=null;bir_req_poll_int=null;set_cookie("BIR_REQ_ID","","","/");document.getElementById('betSlipBodyMembrane').innerHTML=html;vsize_betslip();bad_resp_count=0;return false}else if(ret=='TIMEOUT'){clearInterval(bir_req_poll_int);clearTimeout(bir_req_tout_int);playing_bir_confirm=0;bir_req_tout_int=null;bir_req_poll_int=null;set_cookie("BIR_REQ_ID","","","/");BS_open_betslip();BS_display_error(betslipheader.msg.BS_TIMEOUT_TITLE,betslipheader.msg.BS_TIMEOUT_TXT);bad_resp_count=0;return false}else{clearInterval(bir_req_poll_int);clearTimeout(bir_req_tout_int);playing_bir_confirm=0;bir_req_tout_int=null;bir_req_poll_int=null;set_cookie("BIR_REQ_ID","","","/");BS_display_error(betslipheader.msg.BS_ERROR_TITLE,betslipheader.msg.BS_ERROR_TXT);bad_resp_count=0;return false}}})}catch(err){}}
function BIR_auto_price_upd(){if(push_enabled){BIR_auto_price_upd_ls()}else BIR_auto_price_upd_bx()}
function BIR_auto_price_upd_bx(){var bir_selns_elem=document.getElementById('bir_selns');if(!bir_selns_elem||bir_selns_elem.value=="")return;var poll_interval=betslipbody.bir.poll_interval*betlive_poll_factor;if(betslipbody.bir.interval_id==-1&&poll_interval>betlive_min_poll_interval)betslipbody.bir.interval_id=setInterval('BIR_check_price_upd()',poll_interval)}
function BIR_check_price_upd(){var poll_interval=betslipbody.bir.poll_interval*betlive_poll_factor,bir_selns_elem=document.getElementById('bir_selns');if(!(bir_selns_elem&&bir_selns_elem.value!="")||poll_interval<=betlive_min_poll_interval){clearInterval(betslipbody.bir.interval_id);betslipbody.bir.interval_id=-1;return false};var url=betslipbody.bir.URL+"&seln_ids="+bir_selns_elem.value;$j.ajax({url:url,type:'GET',dataType:'text',success:function(data){var json={};if(data!="")eval('json='+data+';');var price_changed=false,hcap_changed=false,js_seln='',bs_seln='';if(!json.selection)return;for(var index=0,len=json.selection.length;index<len;++index){js_seln=json.selection[index];bs_seln=SELN[js_seln.id];if(!bs_seln.price.Equals(js_seln.lp_num,js_seln.lp_den)){bs_seln.prev_price.num=bs_seln.price.num;bs_seln.prev_price.den=bs_seln.price.den;bs_seln.price.num=js_seln.lp_num;bs_seln.price.den=js_seln.lp_den;price_changed=true};if(bs_seln.hcap!=js_seln.hcap){bs_seln.prev_hcap=bs_seln.hcap;bs_seln.hcap=js_seln.hcap;bs_seln.hcap_str=js_seln.hcap_value;hcap_changed=true}};if(price_changed||hcap_changed)BS_selns_changed()}})};var _BS_BIR_channels=[],_BS_BIR_last_msg_id="",_BS_BIR_Selcn={},_BS_BIR_EvMkt={},_BS_BIR_Event={}
function _BS_BIR_simple_arrays_eq_setwise(a,b){if(a.length!=b.length)return false;var inA={},inB={};for(var i=0;i<a.length;i++)inA["k"+a[i]]=true;for(var i=0;i<b.length;i++){var el=b[i];if(!inA["k"+el])return false;inB["k"+el]=true};for(var i=0;i<a.length;i++)if(!inB["k"+a[i]])return false;return true}
function BIR_auto_price_upd_ls(){var new_msg_id="",el=document.getElementById("bir_msg_id");if(el)new_msg_id=el.value;var new_channels=_BS_BIR_get_push_channels(),channels_same=_BS_BIR_simple_arrays_eq_setwise(_BS_BIR_channels,new_channels),msg_id_lower=(new_msg_id<_BS_BIR_last_msg_id);if(channels_same&&(!msg_id_lower||!new_channels.length))return;_BS_BIR_last_msg_id=new_msg_id;_BS_BIR_channels=new_channels;ps_connect_register("betslip",_BS_BIR_got_push_msg,_BS_BIR_channels,_BS_BIR_last_msg_id);return}
function _BS_BIR_get_push_channels(){_BS_BIR_Selcn={};_BS_BIR_EvMkt={};_BS_BIR_Event={};var el=document.getElementById('bir_selns');if(!el||el.value=="")return[];var bir_selns=el.value.split("|");if(!bir_selns.length)return[];for(var i=0;i<bir_selns.length;i++){var ev_oc_id=bir_selns[i];_BS_BIR_Selcn["s"+ev_oc_id]={}};var leg_nums=BS_get_leg_nums();for(var leg_idx=0;leg_idx<leg_nums.length;leg_idx++){var leg_num=leg_nums[leg_idx],el=document.getElementById("ev_oc_ids_sgl_"+leg_num);if(!el)continue;var sgl_selns=el.value;if(_BS_BIR_Selcn["s"+sgl_selns]==undefined)continue;var ev_oc_id=sgl_selns,suspended_on_server=("Y"==document.getElementById("suspended_"+leg_num).value);if(suspended_on_server)continue;var ev_mkt_id=document.getElementById("ev_mkt_id_sgl_"+leg_num).value,ev_id=document.getElementById("ev_id_sgl_"+leg_num).value,fb_result=document.getElementById("fb_result_sgl_"+leg_num).value;_BS_BIR_Selcn["s"+sgl_selns]={ev_mkt_id:ev_mkt_id,ev_id:ev_id,leg_num:leg_num,fb_result:fb_result,status:"A",bettable:true};if(_BS_BIR_EvMkt["m"+ev_mkt_id]==undefined){_BS_BIR_EvMkt["m"+ev_mkt_id]={ev_id:ev_id,selcns:[ev_oc_id],status:"A"}}else _BS_BIR_EvMkt["m"+ev_mkt_id].selcns.push(ev_oc_id)};for(var key in _BS_BIR_EvMkt){var ev_mkt_id=key.substr(1),mkt=_BS_BIR_EvMkt[key],ev_id=mkt.ev_id;if(_BS_BIR_Event["e"+ev_id]==undefined){_BS_BIR_Event["e"+ev_id]={evmkts:[ev_mkt_id],status:"A"}}else _BS_BIR_Event["e"+ev_id].evmkts.push(ev_mkt_id)};var channels=[];for(var key in _BS_BIR_Selcn){var ev_oc_id=key.substr(1),padded_ev_oc_id=ps_connect_lpad_id(ev_oc_id,10);channels.push("sSELCN"+padded_ev_oc_id)};for(var key in _BS_BIR_EvMkt){var ev_mkt_id=key.substr(1),padded_ev_mkt_id=ps_connect_lpad_id(ev_mkt_id,10);channels.push("sEVMKT"+padded_ev_mkt_id)};for(var key in _BS_BIR_Event){var ev_id=key.substr(1),padded_ev_id=ps_connect_lpad_id(ev_id,10);channels.push("sEVENT"+padded_ev_id)};return channels}
function _BS_BIR_got_push_msg(msg){if(bir_req_tout_int!=null||BS_is_on_receipt())return;var data={};if(msg.subject_level=="sPRICE"||msg.subject_level=="sSELCN"){var ev_oc_id=msg.subject_id;if(_BS_BIR_Selcn["s"+ev_oc_id]){eval("data = "+msg.data+";");_BS_BIR_got_push_selcn(ev_oc_id,data)}}else if(msg.subject_level=="sEVMKT"||msg.subject_level=="sMHCAP"){var ev_mkt_id=msg.subject_id;if(_BS_BIR_EvMkt["m"+ev_mkt_id]){eval("data = "+msg.data+";");_BS_BIR_got_push_evmkt(ev_mkt_id,data)}}else if(msg.subject_level=="sEVENT"){var ev_id=msg.subject_id;if(_BS_BIR_Event["e"+ev_id]){eval("data = "+msg.data+";");_BS_BIR_got_push_event(ev_id,data)}}else return;return}
function _BS_BIR_got_push_selcn(ev_oc_id,data){var bs_seln=SELN[ev_oc_id];if(!bs_seln)return;var bir_selcn=_BS_BIR_Selcn["s"+ev_oc_id];if(!bir_selcn)return;var bir_evmkt=_BS_BIR_EvMkt["m"+bir_selcn.ev_mkt_id],bir_event=_BS_BIR_Event["e"+bir_selcn.ev_id];if(!bir_evmkt|!bir_event)return;var found_change=false;if(data.lp_num!=undefined){var lp_num=data.lp_num,lp_den=data.lp_den;if(!bs_seln.price.Equals(lp_num,lp_den)){bs_seln.prev_price.num=bs_seln.price.num;bs_seln.prev_price.den=bs_seln.price.den;bs_seln.price.num=lp_num;bs_seln.price.den=lp_den;found_change=true}};var orig_bettable=bir_selcn.bettable;if(data.status)bir_selcn.status=data.status;bir_selcn.bettable=bir_selcn.status=="A"&&bir_evmkt.status=="A"&&bir_event.status=="A";if(bir_selcn.bettable!=orig_bettable)_BS_BIR_got_status_chg(ev_oc_id,bir_selcn.bettable);if(found_change)BS_selns_changed();return}
function _BS_BIR_got_push_evmkt(ev_mkt_id,data){var bir_evmkt=_BS_BIR_EvMkt["m"+ev_mkt_id];if(!bir_evmkt)return;var found_change=false;if(data.raw_hcap!=undefined){var raw_hcap=data.raw_hcap,hcap_values=data.hcap_values,ev_oc_ids=_BS_BIR_EvMkt["m"+ev_mkt_id].selcns;if(!ev_oc_ids||!ev_oc_ids.length)return;for(var i=0;i<ev_oc_ids.length;i++){var ev_oc_id=ev_oc_ids[i],bs_seln=SELN[ev_oc_id],fb_result=_BS_BIR_Selcn["s"+ev_oc_id].fb_result;if(!bs_seln||!fb_result)continue;var new_hcap=raw_hcap,new_hcap_str=hcap_values[fb_result];if(new_hcap==undefined||new_hcap_str==undefined)continue;if(new_hcap!=bs_seln.hcap){bs_seln.prev_hcap=bs_seln.hcap;bs_seln.hcap=new_hcap;bs_seln.hcap_str=new_hcap_str;found_change=true}}};if(found_change)BS_selns_changed();if(data.status&&data.status!=bir_evmkt.status){bir_evmkt.status=data.status;var ev_oc_ids=_BS_BIR_EvMkt["m"+ev_mkt_id].selcns;for(var i=0;i<ev_oc_ids.length;i++){var ev_oc_id=ev_oc_ids[i];_BS_BIR_got_push_selcn(ev_oc_id,{})}};return}
function _BS_BIR_got_push_event(ev_id,data){var bir_event=_BS_BIR_Event["e"+ev_id];if(data.status&&data.status!=bir_event.status){bir_event.status=data.status;var ev_mkt_ids=_BS_BIR_Event["e"+ev_id].evmkts;for(var i=0;i<ev_mkt_ids.length;i++){var ev_mkt_id=ev_mkt_ids[i],ev_oc_ids=_BS_BIR_EvMkt["m"+ev_mkt_id].selcns;for(var j=0;j<ev_oc_ids.length;j++){var ev_oc_id=ev_oc_ids[j];_BS_BIR_got_push_selcn(ev_oc_id,{})}}};return}
function BS_selns_changed(){var leg_nums=BS_get_leg_nums();for(var leg_idx=0;leg_idx<leg_nums.length;leg_idx++){var leg_num=leg_nums[leg_idx];if(COOKIE.leg[leg_num].selections.split('c').length!=1)continue;var sgl=COOKIE.leg[leg_num],seln=SELN[sgl.selections],susp=document.getElementById('suspended_'+leg_num);if(susp!=null&&susp.value=='Y')continue;if(!seln.price.Equals(sgl.lp_num,sgl.lp_den)){sgl.prev_lp_num=seln.prev_price.num;sgl.prev_lp_den=seln.prev_price.den;sgl.lp_num=seln.price.num;sgl.lp_den=seln.price.den;var disp_price=format_price(sgl.lp_num,sgl.lp_den);document.getElementById('txt_sgl_live_price_'+leg_num).innerHTML=disp_price;var el_num=document.getElementById('price_num_sgl_'+leg_num),el_den=document.getElementById('price_den_sgl_'+leg_num),old_num=el_num.value,old_den=el_den.value;el_num.value=sgl.lp_num;el_den.value=sgl.lp_den;_BS_adjust_pot_rtn(leg_num,old_num,old_den,sgl.lp_num,sgl.lp_den);var diff=(sgl.lp_den*old_num)-(sgl.lp_num*old_den),prc_icon_longer=document.getElementById('img_price_chg_longer_'+leg_num),prc_icon_shorter=document.getElementById('img_price_chg_shorter_'+leg_num);if(diff>0){prc_icon_longer.style.display='none';prc_icon_shorter.style.display=''}else if(diff<0){prc_icon_longer.style.display='';prc_icon_shorter.style.display='none'}else{prc_icon_longer.style.display='none';prc_icon_shorter.style.display='none'}};if(seln.hcap!=sgl.hcap_value&&seln.hcap_str!=null&&seln.hcap_str!=""){sgl.prev_hcap_value=seln.prev_hcap;sgl.hcap_value=seln.hcap;document.getElementById('txt_sgl_oc_desc_short_hcap_'+leg_num).innerHTML=seln.hcap_str;document.getElementById('txt_sgl_oc_desc_hcap_'+leg_num).innerHTML=seln.hcap_str;document.getElementById('inf_sgl_oc_desc_hcap_'+leg_num).innerHTML=seln.hcap_str;var hcap_icon_longer=document.getElementById('img_hcap_chg_longer_'+leg_num),hcap_icon_shorter=document.getElementById('img_hcap_chg_shorter_'+leg_num);if(sgl.prev_hcap_value<sgl.hcap_value){hcap_icon_longer.style.display='';hcap_icon_shorter.style.display='none'}else if(sgl.prev_hcap_value>sgl.hcap_value){hcap_icon_longer.style.display='none';hcap_icon_shorter.style.display=''}else{hcap_icon_longer.style.display='none';hcap_icon_shorter.style.display='none'}}};BS_store_hash_cookie();BS_upd_potential_winnings()}
function _BS_adjust_pot_rtn(leg_num,old_num,old_den,new_num,new_den){var el_win=document.getElementById("pot_rtn_win_sgl_"+leg_num),el_plc=document.getElementById("pot_rtn_plc_sgl_"+leg_num),pot_win=parseFloat(el_win.value),pot_plc=parseFloat(el_plc.value),old_dec=1.0+(parseFloat(old_num)/parseFloat(old_den)),new_dec=1.0+(parseFloat(new_num)/parseFloat(new_den)),factor=(new_dec/old_dec);pot_win=pot_win*factor;pot_plc=pot_plc*factor;el_win.value=pot_win;el_plc.value=pot_plc;if(BS_get("mult_inclusion","SGL",leg_num)){var el_mul_win,el_mul_plc,pot_mul_win,pot_mul_plc,multi_types=BS_get_multi_types();for(i=0;i<multi_types.length;i++){var type_name=multi_types[i],num_lines=BS_get("num_lines",type_name),el_mul_win=document.getElementById("pot_rtn_win_type_"+type_name),el_mul_plc=document.getElementById("pot_rtn_plc_type_"+type_name),pot_mul_win=parseFloat(el_mul_win.value),pot_mul_plc=parseFloat(el_mul_plc.value);if(num_lines==1){pot_mul_win=pot_mul_win*factor;pot_mul_plc=pot_mul_plc*factor}else{pot_mul_win=0.0;pot_mul_plc=0.0};el_mul_win.value=pot_mul_win;el_mul_plc.value=pot_mul_plc}}}
function BS_is_suspended(leg_num){var susp_el=document.getElementById('suspended_'+leg_num);if(susp_el&&susp_el.value=='Y')return true;var selcns_el=document.getElementById("ev_oc_ids_sgl_"+leg_num);if(selcns_el){var bir_seln=_BS_BIR_Selcn["s"+selcns_el.value];if(bir_seln&&!bir_seln.bettable)return true};return false}
function _BS_BIR_got_status_chg(ev_oc_id,bettable){var bir_seln=_BS_BIR_Selcn["s"+ev_oc_id],leg_num=bir_seln.leg_num,row_id="tr_sgl_"+leg_num+"_1",row_el=document.getElementById(row_id);if(row_el)row_el.style.backgroundColor=bettable?"":"#ffffd9";var row_id="tr_sgl_"+leg_num+"_2",row_el=document.getElementById(row_id);if(row_el)row_el.style.backgroundColor=bettable?"":"#ffffd9";var stake_el=document.getElementById("stake_sgl_"+leg_num);if(stake_el){stake_el.disabled=!bettable;stake_el.style.backgroundColor=bettable?"":"#dcdcdc";if(!bettable){stake_el.value="";BS_stakes_changed(true)}};var ew_el=document.getElementById("leg_ew_sgl_"+leg_num);if(ew_el)ew_el.disabled=!bettable;var pt_el=document.getElementById("price_type_sgl_"+leg_num);if(pt_el)pt_el.disabled=!bettable;if(BS_get('mult_inclusion','SGL',leg_num))_BS_BIR_upd_multiples_avail()}
function _BS_BIR_upd_multiples_avail(){var multi_types=BS_get_multi_types();if(!multi_types.length)return;var multis_ok=true,leg_nums=BS_get_leg_nums();for(var leg_idx=0;leg_idx<leg_nums.length;leg_idx++){var leg_num=leg_nums[leg_idx];if(BS_get('mult_inclusion','SGL',leg_num)&&BS_is_suspended(leg_num)){multis_ok=false;break}};for(i=0;i<multi_types.length;i++){var type_name=multi_types[i],row_el=document.getElementById("tr_multi_type_"+type_name);row_el.className=multis_ok?"boption":"suspended";var stk_el=document.getElementById("stake_type_"+type_name);if(stk_el){stk_el.disabled=!multis_ok;stk_el.style.backgroundColor=multis_ok?"":"#dcdcdc";if(!multis_ok)stk_el.value=""}};if(!multis_ok)BS_stakes_changed(true)}
function BS_set_price_change_alerts_pref(status){if(status==true)set_pref('BETSLIP_ALERTS','All')}
function BS_set_hcap_change_alerts_pref(status){if(status==true)set_pref('BP_HP_IDX_ALERTS','All')}
function BS_round(n){return Math.round(n*100)/100}
function BS_betslip_onload(){BS_build_hash_cookie();window.setTimeout("BS_rearrange_legs()",10);BS_upd_total_stake();BS_upd_potential_winnings();BS_upd_max_bet();BIR_auto_price_upd();BS_upd_cookie();if(document.forms['betslipCount'].bet_count.value==0);}
function BS_get(name,bet_type,index,dflt){var f=document.forms.betSlipInfoForm;switch(name){case'mult_inclusion':var id='mult_inclusion_'+index,mult_inclusion=(dflt?dflt:false);if(f[id]&&f[id].checked)mult_inclusion=true;return mult_inclusion;case'leg_type':if(bet_type=='SGL'){var id='leg_ew_sgl_'+index}else var id='leg_ew_type_'+bet_type;var leg_type=(dflt?dflt:'W');if(f[id]&&f[id].checked)leg_type='E';return leg_type;case'ew_factor':if(bet_type=='SGL'){var num_id='ew_fac_num_sgl_'+index,den_id='ew_fac_den_sgl_'+index}else{var num_id='ew_fac_num_type_'+bet_type,den_id='ew_fac_den_type_'+bet_type};var ew_factor=new BS_Fraction(0,1);if(dflt)ew_factor=dflt;if(f[num_id]&&f[den_id]){var num=parseInt(f[num_id].value),den=parseInt(f[den_id].value);if(!isNaN(num)&&!isNaN(den))ew_factor=new BS_Fraction(num,den)};return ew_factor;case'price':if(bet_type=='SGL'){var num_id='price_num_sgl_'+index,den_id='price_den_sgl_'+index}else{var num_id='price_num_type_'+bet_type,den_id='price_den_type_'+bet_type};var price=new BS_Fraction(0,1);if(dflt)price=dflt;if(f[num_id]&&f[den_id]){var num=parseInt(f[num_id].value),den=parseInt(f[den_id].value);if(!isNaN(num)&&!isNaN(den))price=new BS_Fraction(num,den)};return price;case'stake':throw'use spl instead';case'spl':if(bet_type=='SGL'){var id='stake_sgl_'+index}else var id='stake_type_'+bet_type;var ret_val=(dflt?dflt:0.0);if(f[id]){spl=parseFloat(f[id].value);if(!isNaN(spl))ret_val=spl};return ret_val;case'max_payout':if(bet_type=='SGL'){var id=name+'_sgl_'+index}else var id=name+'_type_'+bet_type;var ret_val=(dflt?dflt:'');if(f[id]){var val=parseFloat(f[id].value);if(!isNaN(val))ret_val=val};return ret_val;default:if(bet_type=='SGL'){var id=name+'_sgl_'+index}else var id=name+'_type_'+bet_type;var ret_val=(dflt?dflt:'');if(f[id])ret_val=f[id].value;return ret_val}}
function BS_build_hash_cookie(){var offset=0;COOKIE=new BS_Cookie();var leg_cookie=get_cookie(betslipbody.cookie_info.BET_LEG_COOKIE_NAME);if(leg_cookie==null||leg_cookie=='')return;var leg_params=BS_get_leg_format(),num_params=leg_params.length,cookie_data=leg_cookie.split("|");if(cookie_data.length%num_params!=0){BS_clear_bet_slip();return false};var num_legs=cookie_data.length/num_params;offset=0;for(var leg_idx=0;leg_idx<num_legs;leg_idx++){var Leg=new Object();for(var param_idx=0;param_idx<num_params;param_idx++)Leg[leg_params[param_idx]]=cookie_data[offset+param_idx];offset+=num_params;var leg_num=Leg.leg_num;COOKIE.leg[leg_num]=Leg;COOKIE.leg_nums.push(leg_num);var selections=COOKIE.leg[leg_num].selections.split('c'),lp_num=COOKIE.leg[leg_num].lp_num,lp_den=COOKIE.leg[leg_num].lp_den,prev_lp_num=COOKIE.leg[leg_num].prev_lp_num,prev_lp_den=COOKIE.leg[leg_num].prev_lp_den,hcap=COOKIE.leg[leg_num].hcap_value,prev_hcap=COOKIE.leg[leg_num].prev_hcap_value;for(var i=0;i<selections.length;i++){var ev_oc_id=selections[i];if(!SELN[ev_oc_id])SELN[ev_oc_id]=new BS_Seln();if(selections.length==1){if(lp_num!=''&&lp_den!=''){SELN[ev_oc_id].price.num=lp_num;SELN[ev_oc_id].price.den=lp_den;SELN[ev_oc_id].prev_price.num=prev_lp_num;SELN[ev_oc_id].prev_price.den=prev_lp_den};if(hcap!=''){SELN[ev_oc_id].hcap=hcap;SELN[ev_oc_id].prev_hcap=prev_hcap}}};if(get_pref('USE_GP')=="Y"&&document.getElementById('g_price_checkbox'))document.getElementById('g_price_checkbox').checked=true};var cookie_comb=get_cookie(betslipbody.cookie_info.BET_MULTI_COOKIE_NAME);if(cookie_comb==null)return;var cookie_data=cookie_comb.split("|"),esc_grouping=cookie_data[0],type_info=cookie_data.slice(1);if(type_info.length%4!=0)return;COOKIE.esc_grouping=esc_grouping;var num_combi=type_info.length/4;offset=0;for(var combi_idx=0;combi_idx<num_combi;combi_idx++){var combi_type=type_info[offset];COOKIE.combi_type.push(combi_type);COOKIE.combi[combi_type]=new Array();COOKIE.combi[combi_type].stake=type_info[offset+1];COOKIE.combi[combi_type].leg_type=type_info[offset+2];COOKIE.combi[combi_type].num_lines=type_info[offset+3];offset+=4}}
function BS_get_leg_nums(){return COOKIE.leg_nums}
function BS_get_multi_types(){return COOKIE.combi_type}
function BS_store_hash_cookie(){var leg_params=BS_get_leg_format(),num_params=leg_params.length,cookie_data=new Array(),offset=0,cookie_str='',leg_nums=BS_get_leg_nums();for(var leg_idx=0;leg_idx<leg_nums.length;leg_idx++){var leg_num=leg_nums[leg_idx];for(var j=0;j<num_params;j++)cookie_data[offset+j]=COOKIE.leg[leg_num][leg_params[j]];offset+=num_params};cookie_str=cookie_data.join('|');set_cookie(betslipbody.cookie_info.BET_LEG_COOKIE_NAME,cookie_str,"",betslipbody.cookie_info.BET_COOKIE_PATH,sports_cookie_domain,"");cookie_data=new Array();offset=0;cookie_data[offset++]=COOKIE.esc_grouping;var combi_type='';for(var i=0;i<COOKIE.combi_type.length;i++){combi_type=COOKIE.combi_type[i];cookie_data[offset]=combi_type;cookie_data[offset+1]=COOKIE.combi[combi_type].stake;cookie_data[offset+2]=COOKIE.combi[combi_type].leg_type;cookie_data[offset+3]=COOKIE.combi[combi_type].num_lines;offset+=4};cookie_str=cookie_data.join('|');set_cookie(betslipbody.cookie_info.BET_MULTI_COOKIE_NAME,cookie_str,"",betslipbody.cookie_info.BET_COOKIE_PATH,sports_cookie_domain,"")}
function BS_do_ew_change(e){BS_update_plural_ew();BS_upd_cookie();BS_upd_total_stake();BS_upd_potential_winnings();BS_upd_max_bet()}
function _mb_keys_for_leg(leg_type,leg_sort,price_type){var prc_prefix,mb_keys=new Array();if(price_type=="S"){prc_prefix="S"}else prc_prefix="L";if(leg_type=="W"||leg_type=="E")mb_keys.push(prc_prefix+",W");if(leg_type=="P"||leg_type=="E")mb_keys.push(prc_prefix+",P");if(leg_sort=="SF"||leg_sort=="RF"||leg_sort=="CF"){mb_keys.push("F")}else if(leg_sort=="TC"||leg_sort=="CT")mb_keys.push("T");mb_keys.push("SGL");return mb_keys};var _maxima_reduced_by_cross_bet_stakes=false
function _calc_max_spls(MB,Bets,Legs){var i,j,k,bet_idx,Bet,bet_leg_idxs,Leg,leg_idx,num_lines_per_seln,stake,leg_mb_keys,mb_key,also_mb_key,ev_oc_id,bet_max_spl,bet_max_reduced_xstk,seln_max_stk,cum_stk,tot_stk,our_stk,oth_stk,seln_max_spl,more_tot_stk,more_our_stk,max_spls=new Array(),SelnStk=new Object(),effective_sf;_maxima_reduced_by_cross_bet_stakes=false;for(bet_idx=0;bet_idx<Bets.length;bet_idx++){Bet=Bets[bet_idx];if(Bet.spl==0.0)continue;bet_leg_idxs=Bet.legs;for(i=0;i<bet_leg_idxs.length;i++){leg_idx=bet_leg_idxs[i];Leg=Legs[leg_idx];if(Bet.lines_per_leg.length==1){num_lines_per_seln=Bet.lines_per_leg[0]}else num_lines_per_seln=Bet.lines_per_leg[i];stake=Bet.spl*num_lines_per_seln;leg_mb_keys=_mb_keys_for_leg(Bet.leg_type,Leg.leg_sort,Leg.price_type);for(j=0;j<leg_mb_keys.length;j++){mb_key=leg_mb_keys[j];for(k=0;k<Leg.ev_oc_ids.length;k++){ev_oc_id=Leg.ev_oc_ids[k];if(!SelnStk[ev_oc_id+","+mb_key+",total"]){SelnStk[ev_oc_id+","+mb_key+",total"]=stake}else SelnStk[ev_oc_id+","+mb_key+",total"]+=stake;if(!SelnStk[ev_oc_id+","+mb_key+","+bet_idx]){SelnStk[ev_oc_id+","+mb_key+","+bet_idx]=stake}else SelnStk[ev_oc_id+","+mb_key+","+bet_idx]+=stake}}}};for(bet_idx=0;bet_idx<Bets.length;bet_idx++){Bet=Bets[bet_idx];bet_max_spl=Bet.bet_type_max;bet_max_reduced_xstk=false;bet_leg_idxs=Bet.legs;for(i=0;i<bet_leg_idxs.length;i++){leg_idx=bet_leg_idxs[i];Leg=Legs[leg_idx];if(Bet.lines_per_leg.length==1){num_lines_per_seln=Bet.lines_per_leg[0]}else num_lines_per_seln=Bet.lines_per_leg[i];leg_mb_keys=_mb_keys_for_leg(Bet.leg_type,Leg.leg_sort,Leg.price_type);for(j=0;j<leg_mb_keys.length;j++){mb_key=leg_mb_keys[j];also_mb_key='';if(MB.sep_cum_max_stk==0)if(mb_key=='L,W'){also_mb_key='S,W'}else if(mb_key=='S,W'){also_mb_key='L,W'}else if(mb_key=='L,P'){also_mb_key='S,P'}else if(mb_key=='S,P')also_mb_key='L,P';for(k=0;k<Leg.ev_oc_ids.length;k++){ev_oc_id=Leg.ev_oc_ids[k];seln_max_stk=MB['max,'+ev_oc_id+','+mb_key];cum_stk=MB['cum,'+ev_oc_id+','+mb_key];if(also_mb_key!='')cum_stk+=MB['cum,'+ev_oc_id+','+also_mb_key];tot_stk=SelnStk[ev_oc_id+","+mb_key+",total"];if(tot_stk==null)tot_stk=0.0;our_stk=SelnStk[ev_oc_id+","+mb_key+","+bet_idx];if(our_stk==null)our_stk=0.0;if(also_mb_key!=''){more_tot_stk=SelnStk[ev_oc_id+','+also_mb_key+',total'];if(more_tot_stk!=null)tot_stk+=more_tot_stk;more_our_stk=SelnStk[ev_oc_id+','+also_mb_key+','+bet_idx];if(more_our_stk!=null)our_stk+=more_our_stk};oth_stk=tot_stk-our_stk;if(mb_key!='SGL'){effective_sf=Bet.grp_sf}else effective_sf=1;seln_max_stk=(seln_max_stk*effective_sf)-(cum_stk+oth_stk);seln_max_spl=seln_max_stk*Bet.bt_sf/num_lines_per_seln;if(seln_max_spl<0.0)seln_max_spl=0.0;if(seln_max_spl<bet_max_spl){bet_max_spl=seln_max_spl;bet_max_reduced_xstk=(oth_stk>=0.01)}}}};if(Bet.spl>0.0&&bet_max_reduced_xstk)_maxima_reduced_by_cross_bet_stakes=true;max_spls.push(bet_max_spl)};return max_spls}
function BS_upd_max_bet(){var i,j,Leg,Bet,leg_num,leg_nums,mult_legs,LegsOnEvOc,ev_oc_ids,ev_oc,leg_idx,leg_sort,legs_on,other_leg_idx,other_leg_sort,stake,spl,max_spls,max_spl,any_exceeded,exceeded,key,elem,max_bet_msg;if(!appears_logged_in())return;if(!BS_get_leg_nums().length)return;var MB;try{eval(document.getElementById('mb_js').value);if(MB==null)throw'no MB hash found'}catch(e){throw'could not interpret mb_js due to '+e};var Legs=new Array(),Bets=new Array(),leg_nums=BS_get_leg_nums();for(var leg_idx=0;leg_idx<leg_nums.length;leg_idx++){var leg_num=leg_nums[leg_idx];Leg=new Object();Leg.leg_sort=COOKIE.leg[leg_num].leg_sort;if(Leg.leg_sort=='')Leg.leg_sort='--';Leg.price_type=COOKIE.leg[leg_num].price_type;Leg.ev_oc_ids=document.getElementById("ev_oc_ids_sgl_"+leg_num).value.split(",");Legs[Legs.length]=Leg};var leg_nums=BS_get_leg_nums();for(var leg_idx=0;leg_idx<leg_nums.length;leg_idx++){var leg_num=leg_nums[leg_idx];Bet=new Object();Bet.leg_type=BS_get("leg_type","SGL",leg_num);Bet.legs=[leg_num];Bet.grp_sf=parseFloat(document.getElementById("grp_sf_sgl_"+leg_num).value);Bet.bt_sf=parseFloat(document.getElementById("bt_sf_sgl_"+leg_num).value);Bet.bet_type_max=parseFloat(document.getElementById("type_max_sgl_"+leg_num).value);Bet.leg_sort=COOKIE.leg[leg_num].leg_sort;var total_num_lines=BS_get("num_lines","SGL",leg_num),num_selns=COOKIE.leg[leg_num].selections.split('c').length;switch(Bet.leg_sort){case'CF':Bet.lines_per_leg=[total_num_lines*2/num_selns];break;case'CT':Bet.lines_per_leg=[total_num_lines*3/num_selns];break;case'RF':Bet.lines_per_leg=[2];break;default:Bet.lines_per_leg=[BS_get("num_lines","SGL",leg_num)]};stake=BS_get("spl","SGL",leg_num);if(!(stake>0.0))stake=0.0;Bet.spl=stake;Bet.id_key=leg_num;Bets.push(Bet)};var multi_types=BS_get_multi_types();for(i=0;i<multi_types.length;i++){var type_name=multi_types[i];Bet=new Object();Bet.leg_type=BS_get('leg_type',type_name);Bet.grp_sf=parseFloat(document.getElementById("grp_sf_"+type_name).value);Bet.bt_sf=parseFloat(document.getElementById("bt_sf_"+type_name).value);Bet.bet_type_max=parseFloat(document.getElementById("type_max_"+type_name).value);Bet.lines_per_leg=document.getElementById("leg_lines_"+type_name).value.split(",");Bet.legs=document.getElementById("legs_"+type_name).value.split(",");spl=BS_get('spl',type_name,null,0.0);if(!(spl>0.0))spl=0.0;Bet.spl=spl;Bet.id_key=type_name;Bets.push(Bet)};max_spls=_calc_max_spls(MB,Bets,Legs);any_exceeded=false;for(i=0;i<max_spls.length;i++){max_spl=max_spls[i];key=Bets[i].id_key;exceeded=false;max_spl=Math.round(max_spl*100-0.5+1e-6)/100;if(Bet.spl>max_spl){exceeded=true;any_exceeded=true};max_bet_msg=BS_format_stake(max_spl);elem=document.getElementById('max_bet_disp_'+key);if(elem)elem.innerHTML=max_bet_msg;elem=document.getElementById('max_bet_disp_tooltip_'+key);if(elem)elem.innerHTML=max_bet_msg;if(!isNaN(key)){document.getElementById("max_bet_sgl_"+key).value=max_spl;elem=document.getElementById("stake_sgl_"+key);if(elem)if(elem.value=="MAX")BS_upd_sgl_stake(key,max_spl,false)}else{document.getElementById("max_bet_"+key).value=max_spl;elem=document.getElementById("stake_type_"+key);if(elem)if(elem.value=="MAX")BS_upd_type_stake(key,max_spl)}};_BS_upd_max_bet_plural();return any_exceeded}
function _BS_upd_max_bet_plural(){var i,leg,legs,max_spl,min_max_spl,max_bet_msg,elem,key;legs=BS_get_plural_legs();if(legs.length<1)return;for(i=0;i<legs.length;i++){leg=legs[i];max_spl=parseFloat(document.getElementById("max_bet_sgl_"+leg).value);if(i==0||max_spl<min_max_spl)min_max_spl=max_spl};max_bet_msg=BS_format_stake(min_max_spl);key='plural';elem=document.getElementById('max_bet_disp_'+key);if(elem)elem.innerHTML=max_bet_msg;elem=document.getElementById('max_bet_disp_tooltip_'+key);if(elem)elem.innerHTML=max_bet_msg;return}
function BS_selections_not_all_suspended(){var msg=betslipbody.msg,leg_nums=BS_get_leg_nums(),num_susp=0;for(var leg_idx=0;leg_idx<leg_nums.length;leg_idx++){var leg_num=leg_nums[leg_idx];if(BS_is_suspended(leg_num))num_susp++};if(num_susp<leg_nums.length){return true}else{BS_display_error(msg.BS_ALL_SELN_SUSP_TITLE,msg.BS_ALL_SELN_SUSP_TEXT);return false}}
function BS_stakes_within_limits(){var msg=betslipbody.msg,bet_exists=false,err_str='',matchedbet_token_id=document.forms[betslipbody.mainForm].elements['matchedbet_token_id'].value,matchedbet_stake=document.forms[betslipbody.mainForm].elements['matchedbet_stake'].value,matchedbet_leg_or_type=document.forms[betslipbody.mainForm].elements['matchedbet_leg_or_type'].value,ccy=unescapeHTML(document.getElementById('cust_html_ccy').value),leg_nums=BS_get_leg_nums();for(var leg_idx=0;leg_idx<leg_nums.length;leg_idx++){var leg_num=leg_nums[leg_idx],stake=COOKIE.leg[leg_num].stake;if(stake!=""&&stake>0)bet_exists=true;var max_bet=document.getElementById("max_bet_sgl_"+leg_num).value,min_bet=document.getElementById("min_bet_sgl_"+leg_num).value,seln_name=document.getElementById("txt_sgl_oc_desc_disp_"+leg_num).innerHTML+' '+document.getElementById("txt_sgl_oc_desc_hcap_"+leg_num).innerHTML,el=document.getElementById("txt_sgl_ev_desc_"+leg_num),ev_name;if(el!=null){ev_name=el.innerHTML}else ev_name='';if(appears_logged_in()){var stake=parseFloat(stake),is_invalid=false;if(max_bet>=0.0&&stake>=0.0&&stake>max_bet){var max_stake=BS_format_stake(max_bet),high_msg=_maxima_reduced_by_cross_bet_stakes?msg.BS_STAKE_SGL_TOO_HIGH_CROSS:msg.BS_STAKE_SGL_TOO_HIGH;err_str+=BS_js_subst(high_msg,{item:seln_name,amount:max_stake,event:ev_name});if(matchedbet_leg_or_type!=""&&matchedbet_leg_or_type==leg_num){var original_stake=stake-matchedbet_stake;if(original_stake<=max_bet)err_str+=BS_js_subst(msg.BS_STAKE_SGL_MB_TOO_HIGH,{matchedbet_stake:matchedbet_stake,ccy:ccy});BS_deallocate_matchedbet_token()};is_invalid=true}else if(min_bet>=0.0&&stake>0.0&&stake<min_bet){var min_stake=BS_format_stake(min_bet);err_str+=BS_js_subst(msg.BS_STAKE_SGL_TOO_LOW,{item:seln_name,amount:min_stake,event:ev_name});is_invalid=true}else if(stake<0){err_str+=BS_js_subst(msg.BS_STAKE_LESS_THAN_ZERO,{item:seln_name});is_invalid=true};if(is_invalid)err_str+='<br><br>'}};var multi_types=BS_get_multi_types();for(i=0;i<multi_types.length;i++){type_name=multi_types[i];var max_bet=document.getElementById("max_bet_"+type_name).value,min_bet=document.getElementById("min_bet_"+type_name).value,stake=document.getElementById("stake_type_"+type_name).value,type_desc=document.getElementById("type_desc_"+type_name).value;if(stake!=""&&stake>0)bet_exists=true;if(appears_logged_in()){var stake=parseFloat(stake);if(max_bet>=0.0&&stake>=0.0&&stake>max_bet){var max_stake=BS_format_stake(max_bet),high_msg=_maxima_reduced_by_cross_bet_stakes?msg.BS_STAKE_TYPE_TOO_HIGH_CROSS:msg.BS_STAKE_TYPE_TOO_HIGH;err_str+=BS_js_subst(high_msg,{item:type_desc,amount:max_stake})+'<br><br>'}else if(min_bet>=0.0&&stake>0.0&&stake<min_bet){var min_stake=BS_format_stake(min_bet);err_str+=BS_js_subst(msg.BS_STAKE_TYPE_TOO_LOW,{item:type_desc,amount:min_stake})+'<br><br>'}else if(stake<0)err_str+=BS_js_subst(msg.BS_STAKE_LESS_THAN_ZERO,{item:type_desc})}};if(!bet_exists){BS_display_error(msg.BS_STAKE_INVALID,msg.BS_STAKE_INPUT_PROMPT);return false};if(err_str!=''){BS_display_error(msg.BS_STAKE_INVALID,err_str);return false};var fb_value=BS_get_freebet_token_value();if(fb_value>0){var fb_ok=false,leg=document.forms[betslipbody.mainForm].elements['freebet_leg_or_type'].value;if(leg!=""){var stake=BS_get_stake(leg);if(stake>=fb_value)fb_ok=true};if(!fb_ok){BS_display_error(msg.BS_STAKE_INVALID,msg.BS_FREEBET_ENTIRETY);return false}};return true}
function BS_do_price_type_change(){BS_upd_cookie();BS_upd_total_stake();BS_upd_potential_winnings();BS_upd_max_bet()}
function BS_leg_sort_changed(leg_num,leg_sort){var key='sgl_'+leg_num+'_'+leg_sort,num_lines=document.getElementById('ls_lines_'+key).value,leg_sort_desc=document.getElementById('ls_desc_'+key).value;COOKIE.leg[leg_num].leg_sort=leg_sort;document.getElementById('num_lines_sgl_'+leg_num).value=num_lines;var el=document.getElementById('txt_sgl_mkt_desc_'+leg_num);if(el)el.innerHTML=leg_sort_desc;BS_upd_cookie();BS_upd_total_stake();BS_upd_max_bet()}
function BS_upd_cookie(){var leg_nums=BS_get_leg_nums();for(var leg_idx=0;leg_idx<leg_nums.length;leg_idx++){var leg_num=leg_nums[leg_idx];COOKIE.leg[leg_num].price_type=BS_get('price_type','SGL',leg_num);if(COOKIE.leg[leg_num].price_type=='S'){COOKIE.leg[leg_num].lp_num='';COOKIE.leg[leg_num].lp_den='';COOKIE.leg[leg_num].prev_lp_num='';COOKIE.leg[leg_num].prev_lp_den=''};COOKIE.leg[leg_num].stake=BS_get('spl','SGL',leg_num);COOKIE.leg[leg_num].leg_type=BS_get('leg_type','SGL',leg_num);var mult_incl=BS_get('mult_inclusion','SGL',leg_num);COOKIE.leg[leg_num].mult_incl=mult_incl?'Y':'N';update_use_gp()};var combi_type='';for(var i=0;i<COOKIE.combi_type.length;i++){combi_type=COOKIE.combi_type[i];COOKIE.combi[combi_type].stake=BS_get('spl',combi_type);COOKIE.combi[combi_type].leg_type=BS_get('leg_type',combi_type)};BS_store_hash_cookie()}
function _BS_raw_pot_rtn(bet_type,index){var i,leg_num,leg_nums,price_type,pot_rtn_win,pot_rtn_plc;if(bet_type=="SGL"){leg_nums=[index]}else leg_nums=document.getElementById("legs_"+bet_type).value.split(",");for(i=0;i<leg_nums.length;i++){leg_num=leg_nums[i];price_type=BS_get("price_type","SGL",leg_num);if(!(price_type=="L"||price_type=="G"))return[NaN,NaN]};pot_rtn_win=parseFloat(BS_get("pot_rtn_win",bet_type,index));if(!(pot_rtn_win>0.0))pot_rtn_win=NaN;pot_rtn_plc=parseFloat(BS_get("pot_rtn_plc",bet_type,index));if(!(pot_rtn_plc>0.0))pot_rtn_plc=NaN;return[pot_rtn_win,pot_rtn_plc]}
function BS_pot_rtn(bet_type,index){var Rtn=new Object(),raw_rtns=_BS_raw_pot_rtn(bet_type,index),pot_rtn_win=raw_rtns[0],pot_rtn_plc=raw_rtns[1];if(isNaN(pot_rtn_win)){Rtn.unit_stk_rtn_win=NaN;Rtn.unit_stk_rtn_win_msg=betslipbody.msg.BS_NOT_APPLICABLE}else{Rtn.unit_stk_rtn_win=BS_round(pot_rtn_win);Rtn.unit_stk_rtn_win_msg=BS_format_stake(pot_rtn_win)};var spl=BS_get("spl",bet_type,index);if(!(spl>0.0)){Rtn.pot_rtn=0.0;Rtn.pot_rtn_msg=betslipbody.msg.BS_NOT_APPLICABLE}else{var leg_type=BS_get("leg_type",bet_type,index),pot_rtn=0.0;if(leg_type=="W"||leg_type=="E")pot_rtn+=pot_rtn_win;if(leg_type=="P"||leg_type=="E")pot_rtn+=pot_rtn_plc;if(!(pot_rtn>0.0)){Rtn.pot_rtn=NaN;Rtn.pot_rtn_msg=betslipbody.msg.BS_NOT_APPLICABLE}else{pot_rtn=pot_rtn*spl;var freebet_value=BS_get_freebet_token_value();if(freebet_value){var selected_bet=document.forms[betslipbody.mainForm].elements['freebet_leg_or_type'].value;if(bet_type=='SGL'&&selected_bet==index||selected_bet==bet_type){var current_stake=BS_get_stake(selected_bet);freebet_value=parseFloat(freebet_value);current_stake=parseFloat(current_stake);if(current_stake>freebet_value){pot_rtn-=freebet_value}else pot_rtn-=current_stake}};if(betslipbody.cfg.POT_RTN_OBEYS_MAX_PAY!='N'){var max_payout=BS_get("max_payout",bet_type,index);if(max_payout>0.0&&pot_rtn>max_payout)pot_rtn=max_payout};Rtn.pot_rtn=BS_round(pot_rtn);var ccy=document.getElementById('cust_html_ccy').value;Rtn.pot_rtn_msg=ccy+BS_format_stake(pot_rtn)}};return Rtn}
function BS_upd_potential_winnings(){var i,num_sgls,leg_num,Rtn;BS_allocate_freebet_token();var warn_threshold=parseFloat(betslipbody.cfg.POT_WARN_THRESHOLD),tot_pot_rtn=0.0,leg_nums=BS_get_leg_nums();for(var leg_idx=0;leg_idx<leg_nums.length;leg_idx++){var leg_num=leg_nums[leg_idx];Rtn=BS_pot_rtn("SGL",leg_num);tot_pot_rtn+=Rtn.pot_rtn;var html_pot_win=document.getElementById('txt_potential_win_'+leg_num);if(html_pot_win)html_pot_win.innerHTML=Rtn.pot_rtn_msg;var warn_el=document.getElementById('pot_win_warn_'+leg_num);if(warn_el!=null)if(Rtn.pot_rtn<warn_threshold){warn_el.style.display='none'}else warn_el.style.display=''};var multi_types=BS_get_multi_types();for(i=0;i<multi_types.length;i++){type_name=multi_types[i];Rtn=BS_pot_rtn(type_name);tot_pot_rtn+=Rtn.pot_rtn;var html_pot_win=document.getElementById('txt_potential_win_'+type_name);if(html_pot_win)html_pot_win.innerHTML=Rtn.pot_rtn_msg;var html_acc_odds=document.getElementById('txt_acc_odds_'+type_name);if(html_acc_odds)html_acc_odds.innerHTML=Rtn.unit_stk_rtn_win_msg;var warn_el=document.getElementById('pot_win_warn_'+type_name);if(warn_el!=null)if(Rtn.pot_rtn>warn_threshold){warn_el.style.display=''}else warn_el.style.display='none'};var potential_win=document.getElementById('txtPotentialWin');if(potential_win)if(tot_pot_rtn>0.0){var ccy=document.getElementById('cust_html_ccy').value;potential_win.innerHTML=ccy+BS_format_stake(tot_pot_rtn)}else potential_win.innerHTML=betslipbody.msg.BS_NOT_APPLICABLE;var warn_el=document.getElementById('pot_win_warn');if(warn_el!=null)if(tot_pot_rtn>warn_threshold){warn_el.style.display='block'}else warn_el.style.display='none';return tot_pot_rtn}
function BS_format_stake(stake){stake=(Math.round(stake*100)/100).toString();var decimal=stake.indexOf('.');if(decimal==-1){stake=stake+".00"}else if(decimal==stake.length-1){stake=stake+"00"}else if(decimal==stake.length-2){stake=stake+"0"}else stake=stake.substr(0,(decimal+3));return stake}
function BS_canonicalise_monetary_input(el){var s,f,c;s=el.value;c='';if(s.length){f=parseFloat(s);if(!isNaN(f))c=BS_format_stake(f)};if(c.indexOf("+")!=-1||c.length>9){alert(betslipbody.msg.BS_STAKE_INVALID);c=''};if(s!=c)el.value=c;return c}
function BS_ensure_monetary_input(el){var s=el.value,re=/(^[0-9]{0,8}(\.[0-9]{0,2})?)/,mtch=s.match(re),good;if(mtch.length){good=mtch[0]}else good='';if(good!=s)el.value=good;return good}
function BS_stake_changed(box_id,from_kb,skip_dep_upd){var el=document.getElementById(box_id);if(from_kb){BS_ensure_monetary_input(el)}else BS_canonicalise_monetary_input(el);if(!skip_dep_upd){BS_stakes_changed();if(box_id.indexOf("_sgl_")!=-1)BS_clear_plural_stake_if_not(el.value)}};var stk_chg_timer=null
function BS_stakes_changed(force){BS_upd_cookie();if(stk_chg_timer)window.clearTimeout(stk_chg_timer);if(force){_BS_stakes_changed_delayed()}else stk_chg_timer=window.setTimeout("_BS_stakes_changed_delayed()",666)}
function _BS_stakes_changed_delayed(){if(stk_chg_timer)window.clearTimeout(stk_chg_timer);if(document.forms.betSlipInfoForm==undefined)return;BS_upd_total_stake();BS_upd_potential_winnings();BS_upd_max_bet()}
function BS_upd_sgl_stake(leg_num,stk,skip_dep_upd){var box_id='stake_sgl_'+leg_num,el=document.getElementById(box_id);if(el){el.value=stk;BS_stake_changed(box_id,false,skip_dep_upd)}}
function BS_upd_type_stake(bet_type,stk){var box_id='stake_type_'+bet_type,el=document.getElementById(box_id);if(el){el.value=stk;BS_stake_changed(box_id,false)}}
function BS_get_plural_legs(){var el=document.getElementById("legs_plural");if(!el||!el.value.length){return[]}else{var legs=el.value.split(","),keep_legs=[];for(var i=0;i<legs.length;i++){var leg=legs[i];if(!BS_is_suspended(leg)&&!BS_is_hidden_leg(leg))keep_legs.push(leg)};return keep_legs}}
function BS_toggle_enhanced_block(leg_num,alt_leg_num){var elem_loz=document.getElementById("enh_lozagne_"+leg_num),elem_loz_alt=document.getElementById("enh_lozagne_"+alt_leg_num),elem_tr_sgl_1=document.getElementById("tr_sgl_"+leg_num+"_1"),elem_tr_sgl_2=document.getElementById("tr_sgl_"+leg_num+"_2");document.getElementById("bs_enh_odds_select_"+leg_num).selectedIndex=0;document.getElementById("mult_inclusion_"+leg_num).checked="";document.getElementById("mult_inclusion_"+alt_leg_num).checked="true";var stake=document.getElementById("stake_sgl_"+leg_num).value;document.getElementById("stake_sgl_"+leg_num).value=0;document.getElementById("stake_sgl_"+alt_leg_num).value=stake;if(elem_loz)elem_loz.style.display='none';if(elem_loz_alt)elem_loz_alt.style.display='';if(elem_tr_sgl_1){elem_tr_sgl_1.style.display='none';document.getElementById("tr_sgl_"+alt_leg_num+"_1").style.display=''};if(elem_tr_sgl_2){elem_tr_sgl_2.style.display='none';document.getElementById("tr_sgl_"+alt_leg_num+"_2").style.display=''};COOKIE.leg[leg_num].hide_leg='Y';COOKIE.leg[alt_leg_num].hide_leg='N';COOKIE.leg[alt_leg_num].disporder=COOKIE.leg[leg_num].disporder;COOKIE.leg[leg_num].mult_incl_req=0;COOKIE.leg[alt_leg_num].mult_incl_req=1}
function BS_get_hidden_legs(){var leg_nums=BS_get_leg_nums(),hidden_legs=[];for(var leg_idx=0;leg_idx<leg_nums.length;leg_idx++){var leg_num=leg_nums[leg_idx];if(BS_is_hidden_leg(leg_num))hidden_legs.push(leg_num)};return hidden_legs}
function BS_is_hidden_leg(leg_num){if(COOKIE.leg[leg_num].hide_leg=='Y')return true;return false}
function BS_get_enhanced_legs(){var leg_nums=BS_get_leg_nums(),enhanced_legs=[];for(var leg_idx=0;leg_idx<leg_nums.length;leg_idx++){var leg_num=leg_nums[leg_idx];if(BS_is_enhanced_leg(leg_num))enhanced_legs.push(leg_num)};return enhanced_legs}
function BS_is_enhanced_leg(leg_num){if(COOKIE.leg[leg_num].is_enhanced_odds=='Y')return true;return false}
function BS_plural_stake_changed(from_kb){var i,legs,leg,el,spl;el=document.getElementById("stake_plural");if(from_kb){BS_ensure_monetary_input(el)}else BS_canonicalise_monetary_input(el);spl=el.value;if(spl=='');legs=BS_get_plural_legs();for(i=0;i<legs.length;i++){leg=legs[i];BS_upd_sgl_stake(leg,spl,true)};BS_stakes_changed()}
function BS_clear_plural_stake_if_not(stk){var el,pl_stk;el=document.getElementById("stake_plural");if(!el)return;stk=parseFloat(stk);pl_stk=parseFloat(el.value);if(stk!=pl_stk)el.value=''}
function BS_update_plural_ew(){var pl_ew_box=document.getElementById('leg_ew_type_plural');if(!pl_ew_box)return;var all_ew=true,ew_box,leg=BS_get_plural_legs();for(var i=0;i<leg.length;i++){ew_box=document.getElementById('leg_ew_sgl_'+leg[i]);if(!ew_box||ew_box.disabled)continue;all_ew&=ew_box.checked};pl_ew_box.checked=all_ew}
function BS_plural_ew_changed(){var legs,i,leg,ew,el;ew=document.getElementById("leg_ew_type_plural").checked;legs=BS_get_plural_legs();for(i=0;i<legs.length;i++){leg=legs[i];el=document.getElementById("leg_ew_sgl_"+leg);if(el&&!el.disabled)el.checked=ew};BS_upd_cookie();BS_upd_total_stake();BS_upd_potential_winnings();BS_upd_max_bet()}
function BS_upd_total_stake(){var total_stake=document.getElementById("txtTotalStake");if(total_stake)total_stake.innerHTML=BS_format_stake(BS_get_total_stake())}
function BS_get_total_stake(){var total_stake=0.0,leg_nums=BS_get_leg_nums();for(var leg_idx=0;leg_idx<leg_nums.length;leg_idx++){var leg_num=leg_nums[leg_idx],stake=BS_get_stake(leg_num);if(stake>0.0)total_stake+=stake};if(parseFloat(document.getElementById('matchedbet_stake'))>0)total_stake+=parseFloat(document.getElementById('matchedbet_stake'));var multi_types=BS_get_multi_types();for(i=0;i<multi_types.length;i++){type_name=multi_types[i];var stake=BS_get_stake(type_name);if(stake>0.0)total_stake+=stake};return total_stake}
function place_bet(){set_cookie("FASTBET_PROCESS","","","/");BS_clear_fastbet_cookie();var freebet_cookie=get_cookie(betslipbody.cookie_info.BET_FREEBET_COOKIE_NAME),lowest_token_value=document.getElementById("lowest_token_value"),freebets_menu=document.getElementById('lstFreeBets');if(!freebet_cookie&&freebets_menu&&lowest_token_value)if(BS_get_total_stake()>=lowest_token_value.value){show_freebet_warning();return};place_bet_work()}
function place_bet_work(){BS_stakes_changed(true);if(!BS_allocate_freebet_token());if(!BS_valid_betslip())return;if(BS_confirm_bet()){if(BS_show_prc_hcap_alerts()){BS_deallocate_matchedbet_token()}else{set_cookie("POSSIBLE_PLACED_BET","1","","/");BS_submit_betslip('betSlipMainForm',betslipbody.url.CGI_URL)}}else BS_deallocate_matchedbet_token()}
function show_freebet_warning(){if(document.getElementById('betSlipFreebet'))document.getElementById('betSlipFreebet').style.display=""}
function hide_freebet_warning(){if(document.getElementById('betSlipFreebet'))document.getElementById('betSlipFreebet').style.display="none"}
function force_freebet(){var lowest_token_id=document.getElementById("lowest_token_id");if(lowest_token_id!=null){BS_update_freebet(lowest_token_id.value);BS_update_freebet_menu()};place_bet_work()}
function BS_show_prc_hcap_alerts(){var new_msgs=new Array(),prc_chg_alert=get_pref('BETSLIP_ALERTS');if(prc_chg_alert==null||prc_chg_alert=="")prc_chg_alert="Better";var hcp_chg_alert=get_pref('BP_HP_IDX_ALERTS');if(hcp_chg_alert==null||hcp_chg_alert=="")hcp_chg_alert="Prompt";var alerts_cfg=betslipbody.cfg.BETSLIP_ALERTS;if((hcp_chg_alert=="All"&&prc_chg_alert=="All")||alerts_cfg=='N')return false;var is_price_change_alert=false,is_hcap_change_alert=false,leg_nums=BS_get_leg_nums();for(var leg_idx=0;leg_idx<leg_nums.length;leg_idx++){var leg_num=leg_nums[leg_idx];if(COOKIE.leg[leg_num].selections.split('c').length!=1)continue;var sgl=COOKIE.leg[leg_num],susp=document.getElementById('suspended_'+leg_num);if(susp!=null&&susp.value=='Y')continue;if(sgl.prev_lp_num!=null&&sgl.prev_lp_num!=null&&sgl.prev_lp_num!=""&&sgl.prev_lp_num!=""){var odds_longer=(sgl.lp_num*sgl.prev_lp_den)>(sgl.lp_den*sgl.prev_lp_num);if(!(prc_chg_alert=="Better"&&odds_longer)&&prc_chg_alert!="All"){var ev_oc_desc=document.getElementById('txt_sgl_oc_desc_disp_'+leg_num).innerHTML+' '+document.getElementById('txt_sgl_oc_desc_hcap_'+leg_num).innerHTML,msg_id='price_change_message_'+leg_num,msg_txt=betslipbody.msg.BS_BIR_PRICE_UPD_TXT+" "+ev_oc_desc+'<br><br>',msg=new BS_ErrorMessage(msg_id,msg_txt);new_msgs.push(msg);is_price_change_alert=true};sgl.prev_lp_num=null;sgl.prev_lp_den=null;COOKIE.leg[leg_num].prev_lp_num=null;COOKIE.leg[leg_num].prev_lp_den=null;sgl.displayed_lp_num=sgl.lp_num;sgl.displayed_lp_den=sgl.lp_den;COOKIE.leg[leg_num].displayed_lp_num=COOKIE.leg[leg_num].lp_num;COOKIE.leg[leg_num].displayed_lp_den=COOKIE.leg[leg_num].lp_den};if(sgl.prev_hcap_value!=null&&sgl.prev_hcap_value!=""){var show_alert=true,tolerance=document.getElementById('tolerance_sgl_'+leg_num).value;if(betslipbody.cfg.USE_TOLERANCE&&tolerance!=null&&tolerance!="")if(!((parseFloat(sgl.prev_hcap_value)-parseFloat(tolerance))>sgl.hcap_value||(parseFloat(sgl.prev_hcap_value)+parseFloat(tolerance))<sgl.hcap_value))show_alert=false;if(hcp_chg_alert=="Prompt"&&show_alert){var ev_oc_desc=document.getElementById('txt_sgl_oc_desc_disp_'+leg_num).innerHTML+' '+document.getElementById('txt_sgl_oc_desc_hcap_'+leg_num).innerHTML,msg_id='hcap_change_message_'+leg_num,msg_txt=betslipbody.msg.BS_BIR_HCAP_UPD_TXT+" "+ev_oc_desc+'<br><br>',msg=new BS_ErrorMessage(msg_id,msg_txt);new_msgs.push(msg);is_hcap_change_alert=true};sgl.prev_hcap_value=null;COOKIE.leg[leg_num].prev_hcap_value=null;COOKIE.leg[leg_num].displayed_hcap_value=COOKIE.leg[leg_num].hcap_value}};BS_store_hash_cookie();if(new_msgs.length>0){for(var i=0;i<new_msgs.length;i++)BS_add_error(new_msgs[i]);var alert_msg=BS_error_string();if(is_price_change_alert||is_hcap_change_alert){if(is_price_change_alert&&is_hcap_change_alert){BS_display_error(betslipbody.msg.BS_BIR_PRICE_UPD_TITLE,alert_msg,BS_set_price_change_alerts_pref,betslipbody.msg.BS_DO_NOT_SHOW_IN_FUTURE,false,BS_set_hcap_change_alerts_pref,betslipbody.msg.BS_DO_NOT_SHOW_IN_FUTURE_HCAP)}else if(is_price_change_alert){BS_display_error(betslipbody.msg.BS_BIR_PRICE_UPD_TITLE,alert_msg,BS_set_price_change_alerts_pref,betslipbody.msg.BS_DO_NOT_SHOW_IN_FUTURE)}else BS_display_error(betslipbody.msg.BS_BIR_PRICE_UPD_TITLE,alert_msg,BS_set_hcap_change_alerts_pref,betslipbody.msg.BS_DO_NOT_SHOW_IN_FUTURE_HCAP)}else BS_display_error(betslipbody.msg.BS_BIR_PRICE_UPD_TITLE,alert_msg);return true};return false}
function BS_mbs_set_selected(leg_num){var soc_el=document.getElementById("bs_mbs_multichoice_select_"+leg_num);if(typeof soc_el!='undefined'&&soc_el!=null){var soc=soc_el[soc_el.selectedIndex].value;COOKIE.leg[leg_num].link_list='SOC-'+soc;BS_upd_cookie()}}
function BS_confirm_bet(){var msg="",ccy=unescapeHTML(document.getElementById('cust_html_ccy').value),leg_nums=BS_get_leg_nums();for(var leg_idx=0;leg_idx<leg_nums.length;leg_idx++){var leg_num=leg_nums[leg_idx],spl=BS_get("spl","SGL",leg_num);if(!(spl>0.0))continue;var Bet=new Object();if(parseInt(document.getElementById('matchedbet_leg_or_type').value)==leg_idx){Bet.has_matchedbet_stake=true;spl-=document.getElementById('matchedbet_stake').value}else Bet.has_matchedbet_stake=false;Bet.stake=ccy+BS_format_stake(spl);Bet.total=ccy+BS_format_stake(BS_get_stake(leg_num));Bet.lines=BS_get("num_lines","SGL",leg_num);Bet.name=unescapeHTML(document.getElementById("txt_sgl_oc_desc_disp_"+leg_num).innerHTML)+' '+unescapeHTML(document.getElementById("txt_sgl_oc_desc_hcap_"+leg_num).innerHTML);Bet.price_type=BS_get("price_type","SGL",leg_num);Bet.matchedbet_stake=ccy+document.getElementById('matchedbet_stake').value;if(document.getElementById('g_price_checkbox')&&document.getElementById('g_price_checkbox').checked||!document.getElementById('g_price_checkbox')){Bet.g_price_checked='Y'}else Bet.g_price_checked='N';var pt_el=document.getElementById("price_type_sgl_"+leg_num);if(pt_el.options){Bet.price=pt_el.options[pt_el.selectedIndex].text}else{var txt_el;if((txt_el=document.getElementById("txt_sgl_live_price_"+leg_num))||(txt_el=document.getElementById("txt_sgl_nonlive_price_"+leg_num))){Bet.price=unescapeHTML(txt_el.innerHTML)}else Bet.price='??'};var xlation,leg_type=BS_get("leg_type","SGL",leg_num);if(leg_type=="W"){if(Bet.lines==1){if(Bet.has_matchedbet_stake){xlation=betslipbody.msg.BS_CONFIRM_MB_SGL_WIN}else xlation=betslipbody.msg.BS_CONFIRM_SGL_WIN}else if(Bet.has_matchedbet_stake){xlation=betslipbody.msg.BS_CONFIRM_MB_SGL_COMB}else xlation=betslipbody.msg.BS_CONFIRM_SGL_COMB}else{Bet.lines*=2;Bet.terms=unescapeHTML(document.getElementById("txt_sgl_ew_desc_"+leg_num).innerHTML);if(Bet.has_matchedbet_stake){xlation=betslipbody.msg.BS_CONFIRM_MB_SGL_EW}else xlation=betslipbody.msg.BS_CONFIRM_SGL_EW;xlation=betslipbody.msg.BS_CONFIRM_SGL_EW};var soc_el=document.getElementById("bs_mbs_multichoice_select_"+leg_num),soc_msg='';if(typeof soc_el!='undefined'&&soc_el!=null){BS_mbs_set_selected(leg_num);var soc=soc_el[soc_el.selectedIndex].text;soc_msg='\n'+betslipbody.msg.BS_YOUR_MONEY_BACK_CHOICES+' '+soc};msg+=BS_js_subst(xlation,Bet)+soc_msg+"\n\n"};var multi_types=BS_get_multi_types();for(i=0;i<multi_types.length;i++){bet_type=multi_types[i];var spl=BS_get("spl",bet_type);if(!(spl>0.0))continue;var Bet=new Object();Bet.stake=ccy+BS_format_stake(spl);Bet.total=ccy+BS_format_stake(BS_get_stake(bet_type));Bet.lines=BS_get("num_lines",bet_type);Bet.type=unescapeHTML(document.getElementById('txt_comb_desc_'+bet_type).innerHTML);var xlation,leg_type=BS_get("leg_type",bet_type);if(leg_type=="W"){xlation=betslipbody.msg.BS_CONFIRM_MUL_WIN}else{Bet.lines*=2;xlation=betslipbody.msg.BS_CONFIRM_MUL_EW};msg+=BS_js_subst(xlation,Bet)+"\n\n"};msg+=BS_js_subst(betslipbody.msg.BS_CONFIRM_TOTAL,{total:ccy+unescapeHTML(document.getElementById('txtTotalStake').innerHTML)})+"\n";var freebet=0.0,token_id=document.getElementById('freebet_token_id').value;if(token_id!=""){if(document.getElementById(token_id+'_value'))freebet=document.getElementById(token_id+'_value').value;msg+=BS_js_subst(betslipbody.msg.BS_CONFIRM_FREEBET_TOTAL,{total:ccy+freebet})+"\n"};msg+=betslipbody.msg.BS_CONFIRM_BET;return confirm(msg)}
function BS_upd_betslip(){BS_load_betslip(betslipbody.url.CGI_URL+'?action=GoBetSlip','POST')}
function BS_login_and_place_bet(){BS_stakes_changed(true);if(!BS_valid_betslip())return;var user=document.getElementById('bsUsername').value,pass=document.getElementById('bsPassword').value,user_dflt=document.getElementById('username_default').value,pass_dflt=document.getElementById('password_default').value;if(user==""||user==user_dflt){BS_display_error(betslipbody.msg.BS_INVALID_USERNAME,betslipbody.msg.BS_ENTER_VALID_USERNAME,'','','','','','',true);return};if(pass==""||pass==pass_dflt){BS_display_error(betslipbody.msg.BS_INVALID_PASSWORD,betslipbody.msg.BS_ENTER_VALID_PASSWORD,'','','','','','',true);return};var bs_form=document.forms['betSlipMainForm'],betslip_style=get_pref('BETSLIP_STYLE'),ioBB_element;if(betslip_style=='Detached'){try{if(window.opener&&typeof window.opener.document!='undefined')ioBB_element=window.opener.document.getElementById('ioBB')}catch(e){ioBB_element=''}}else ioBB_element=document.getElementById('ioBB');if(ioBB_element&&ioBB_element.value!="")bs_form.appendChild(ioBB_element);bs_form.elements['username'].value=user;bs_form.elements['pwd'].value=pass;BS_allocate_freebet_token();if(!BS_valid_betslip())return;bs_form.onsubmit="";if(BS_confirm_bet())bs_form.submit()}
function BS_valid_betslip(){if(BS_get_leg_nums().length==0){BS_display_error(betslipbody.msg.BS_NO_SELECTIONS_TITLE,betslipbody.msg.BS_NO_SELECTIONS_TEXT);return false};if(!BS_selections_not_all_suspended())return false;if(!BS_stakes_within_limits())return false;return true}
function BS_get_stake(leg_or_type){var stake,spl;if(isNaN(leg_or_type)){spl=BS_get("spl",leg_or_type)}else spl=BS_get("spl","SGL",leg_or_type);if(isNaN(spl))return NaN;var num_lines;if(isNaN(leg_or_type)){num_lines=BS_get("num_lines",leg_or_type)}else num_lines=BS_get("num_lines","SGL",leg_or_type);stake=spl*num_lines;var leg_type;if(isNaN(leg_or_type)){leg_type=BS_get("leg_type",leg_or_type)}else leg_type=BS_get("leg_type","SGL",leg_or_type);if(leg_type=="E")stake=stake*2;return stake}
function BS_close_error_fast_bet(keep_fast_bet_cookie){BS_close_error();if(typeof keep_fast_bet_cookie=='undefined'||keep_fast_bet_cookie==null||keep_fast_bet_cookie!='1'){BS_clear_fastbet_cookie();enable_fastbet_buttons_upd_cookie()}};var BS_error_close_function1='',BS_checkbox_function1='',BS_error_close_function2='',BS_checkbox_function2='',BS_error_keep_fastbet=''
function BS_display_error(title,text,func1,checkBoxMsg1,checkBoxStatus1,func2,checkBoxMsg2,checkBoxStatus2,keepFastbet){if(func1){BS_error_close_function1=func1}else BS_error_close_function1='';if(func2){BS_error_close_function2=func2}else BS_error_close_function2='';if(checkBoxMsg1){checkBoxStatus1=checkBoxStatus1==true;document.getElementById('betSlipJSErrorCheckbox1').checked=checkBoxStatus1;document.getElementById('betSlipJSErrorCheckboxText1').innerHTML=checkBoxMsg1;document.getElementById('betSlipJSErrorCheckboxDiv1').style.display='';BS_checkbox_function1=BS_error_close_function1;BS_error_close_function1=BS_hide_checkbox1};if(checkBoxMsg2){checkBoxStatus2=checkBoxStatus2==true;document.getElementById('betSlipJSErrorCheckbox2').checked=checkBoxStatus2;document.getElementById('betSlipJSErrorCheckboxText2').innerHTML=checkBoxMsg2;document.getElementById('betSlipJSErrorCheckboxDiv2').style.display='';BS_checkbox_function2=BS_error_close_function2;BS_error_close_function2=BS_hide_checkbox2};if(keepFastbet){BS_error_keep_fastbet=keepFastbet==true}else BS_error_keep_fastbet=false;var title_elem=document.getElementById('betSlipJSErrorTitle');title_elem.innerHTML=title;var text_elem=document.getElementById('betSlipJSErrorText');text_elem.innerHTML=text;document.getElementById('betSlipJSError').style.display=""}
function BS_hide_checkbox1(){document.getElementById('betSlipJSErrorCheckboxDiv1').style.display='none';if(BS_checkbox_function1!='')BS_checkbox_function1(document.getElementById('betSlipJSErrorCheckbox1').checked)}
function BS_hide_checkbox2(){document.getElementById('betSlipJSErrorCheckboxDiv2').style.display='none';if(BS_checkbox_function2!='')BS_checkbox_function2(document.getElementById('betSlipJSErrorCheckbox2').checked)}
function BS_close_error(){if(document.getElementById('betSlipBodyError'))document.getElementById('betSlipBodyError').style.display="none"}
function BS_close_topup(fastbet){enable_fastbet_buttons_upd_cookie();BS_load_betslip(betslipbody.url.CGI_URL+'?action=GoBetSlip&from_topup_fastbet='+fastbet)}
function BS_close_error_and_bet(){BS_close_error();try{BS_update_override();var leg_nums=BS_get_leg_nums();for(var leg_idx=0;leg_idx<leg_nums.length;leg_idx++){var leg_num=leg_nums[leg_idx];COOKIE.leg[leg_num].prev_lp_num=null;COOKIE.leg[leg_num].prev_lp_den=null;COOKIE.leg[leg_num].displayed_lp_num=COOKIE.leg[leg_num].lp_num;COOKIE.leg[leg_num].displayed_lp_den=COOKIE.leg[leg_num].lp_den;COOKIE.leg[leg_num].prev_hcap_value=null;COOKIE.leg[leg_num].displayed_hcap_value=COOKIE.leg[leg_num].hcap_value};BS_store_hash_cookie();place_bet()}catch(e){setTimeout('place_bet();',2e3);BS_upd_betslip()};return false}
function BS_close_error_and_fast_bet(){BS_close_error();var fastbet_cookie=get_cookie(betslipbody.cookie_info.BET_FAST_BET_COOKIE_NAME);if(fastbet_cookie==null||fastbet_cookie==''){BS_clear_fastbet_cookie();return};var leg_params=BS_get_leg_format(),num_params=leg_params.length,cookie_data=fastbet_cookie.split("|");if(cookie_data.length%num_params!=0){BS_clear_fastbet_cookie();return false};if((cookie_data.length/num_params)!=1){BS_clear_fastbet_cookie();return false};var Leg=new Object();for(var param_idx=0;param_idx<num_params;param_idx++)Leg[leg_params[param_idx]]=cookie_data[param_idx];BS_clear_fastbet_cookie();var lp_num_override=document.forms['overridesInfo'].elements[1].value,lp_den_override=document.forms['overridesInfo'].elements[2].value,hcap_value_override=document.forms['overridesInfo'].elements[4].value,ev_oc_id=Leg.selections,price_type=Leg.price_type,stake=Leg.stake,lp_num=Leg.lp_num,lp_den=Leg.lp_den,hcap_value=Leg.hcap_value,bir_index=Leg.bir_index,market_tags=Leg.market_tags;if(hcap_value_override!=''&&hcap_value!=hcap_value_override)hcap_value=hcap_value_override;var price=new BS_Fraction(lp_num,lp_den);if(lp_num_override!=''&&lp_den_override!=''&&!price.Equals(lp_num_override,lp_den_override)){lp_num=lp_num_override;lp_den=lp_den_override};BS_set_leg("selections",ev_oc_id);BS_set_leg("price_type",price_type);BS_set_leg("stake",stake);BS_set_leg("lp_num",lp_num);BS_set_leg("lp_den",lp_den);BS_set_leg("hcap_value",hcap_value);BS_set_leg("bir_index",bir_index);BS_set_leg("market_tags",market_tags);BS_go_bet(true);return}
function BS_close_js_error(){BS_ERR_MSG=new Array();document.getElementById('betSlipJSError').style.display="none";if(BS_error_close_function1!='')eval(BS_error_close_function1);if(BS_error_close_function2!='')eval(BS_error_close_function2);var fb_process=get_cookie('FASTBET_PROCESS');if(!BS_error_keep_fastbet&&fb_process&&fb_process=='1'){BS_clear_fastbet_cookie();enable_fastbet_buttons_upd_cookie()}}
function BS_add_error(msg){for(var i=0;i<BS_ERR_MSG.length;i++)if(msg.id==BS_ERR_MSG[i].id)return;BS_ERR_MSG.push(msg)}
function BS_error_string(){var error_string='';for(var i=0;i<BS_ERR_MSG.length;i++)error_string=error_string.concat(BS_ERR_MSG[i].message);return error_string}
function BS_do_confirm_deposit(){var topup_amount=document.getElementById('topup_amount').value,ccy_symbol=document.getElementById('cust_html_ccy').value,min_dep=document.getElementById('min_dep').value,dep_only=parseInt(document.getElementById('dep_only').value),pay_mthd=document.getElementById('cpm').value;if(!dep_only)min_dep=topup_amount;if(pay_mthd!='UKSH'){if(document.getElementById('rbMinDeposit').checked){var amount=topup_amount}else if(document.getElementById('rbChooseAmount').checked){var amount=document.getElementById('txtDepositAmount').value;if(parseFloat(amount)<parseFloat(min_dep)){var error_text=BS_js_subst(betslipbody.msg.BS_QDEP_TOO_LOW_TEXT,{ccy:ccy_symbol,amount:min_dep});BS_display_error(betslipbody.msg.BS_QDEP_TOO_LOW_TITLE,error_text,'','','','','','',true);return}}}else var amount=document.getElementById('uksh_vouchervalueBS').value;if(!BS_valid_deposit_fields())return;document.getElementById('dep_amount').value=BS_format_stake(amount);var qd_no_confirm=document.getElementById('qd_no_confirm').value;if(qd_no_confirm==1)return BS_do_deposit();document.getElementById('topupAmountConfirm').innerHTML=ccy_symbol+BS_format_stake(amount);document.getElementById('confirm_topup').style.display=''}
function BS_valid_deposit_fields(){var msg=betslipbody.msg;if(document.getElementById('dep_password')!=null&&document.getElementById('dep_password').value==''){BS_display_error(msg.BS_QDEP_NO_PASSWORD_TITLE,msg.BS_QDEP_NO_PASSWORD_TEXT,'','','','','','',true);return 0};var re_cc=/^\d{3,4}$/,re_ntlr=/^\d{6}$/,re_uksh=/^\d{19}$/;switch(document.getElementById('cpm').value){case'CC':return 1;case'NTLR':if(!re_ntlr.test(document.getElementById('ntlr_secureidBS').value)){BS_display_error(msg.BS_QDEP_NO_NETELLER_TITLE,msg.BS_QDEP_NO_NETELLER_TITLE,'','','','','','',true);return 0};break;case'UKSH':if(!re_uksh.test(document.getElementById('uksh_voucheridBS').value)){BS_display_error(msg.BS_QDEP_NO_UKSH_VOUCHER_TITLE,msg.BS_QDEP_NO_UKSH_VOUCHER_TEXT,'','','','','','',true);return 0};break;default:BS_display_error(msg.BS_QDEP_UNKNOWN,msg.BS_QDEP_UNKNOWN,'','','','','','',true);return 0};return 1}
function BS_close_confirm_deposit(fast_bet){document.getElementById('confirm_topup').style.display='none';if(fast_bet==1){BS_clear_fastbet_cookie();enable_fastbet_buttons_upd_cookie()}}
function BS_do_deposit(){var f=document.forms['betSlipDepositForm'];f.submit()}
function BS_topup_wait_loaded(launch_3ds){if(launch_3ds){var df=document.forms.launch3DSForm,url=betslipheader.url.MONEY_SCGI+'?';for(var i=0;i<df.elements.length;i++){var el=df.elements[i];url=url+el.name+'='+encodeURIComponent(el.value)+'&'};BS_open_in_main(url)}}
function BS_delete_legs(vargs){var legs=new Array();for(var i=0;i<arguments.length;i++){var leg_num=arguments[i];if(leg_num==null)continue;legs.push(leg_num)};BS_submit_betslip('betSlipDeleteLegForm','','legs',legs.join('|'))};var retain_sels=false
function BS_close_receipt_bir(){retain_sels=true;BS_close_receipt()}
function BS_close_receipt(){set_cookie(betslipbody.cookie_info.BET_RECEIPT_COOKIE_NAME,'','',betslipbody.cookie_info.BET_COOKIE_PATH,sports_cookie_domain,'');var is__BS=0,leg_nums=BS_get_leg_nums();for(var leg_idx=0;leg_idx<leg_nums.length;leg_idx++){var leg_num=leg_nums[leg_idx];if(COOKIE.leg[leg_num].is__BS==1){is__BS=1;break}};if(document.getElementById('chkRetainSelections')&&document.getElementById('chkRetainSelections').checked)retain_sels=true;if(retain_sels){BS_load_betslip(betslipbody.url.CGI_URL+'?action=GoBetSlip&retain=Y&is__BS='+is__BS,'POST')}else BS_clear_bet_slip();retain_sels=false;enable_fastbet_buttons_upd_cookie()}
function BS_allocate_freebet_token(){var mainf=document.forms[betslipbody.mainForm];if(!mainf)return false;mainf.elements['freebet_leg_or_type'].value='';mainf.elements['freebet_token_id'].value='';var f=document.forms[betslipbody.freebetsForm];if(!f)return false;var ct_id=f.elements['lstFreeBets'].value;if(ct_id=='')return false;var freebet_value=BS_get_freebet_token_value();if(!freebet_value)return false;var valid_legs=f.elements['valid_leg_or_type_'+ct_id];if(!valid_legs)return false;var selected_bet='none',highest_stake=0,leg_nums=BS_get_leg_nums();for(var leg_idx=0;leg_idx<leg_nums.length;leg_idx++){var leg_num=leg_nums[leg_idx];if(COOKIE.leg[leg_num].stake>highest_stake){selected_bet=leg_num;highest_stake=COOKIE.leg[leg_num].stake}};var combi_type,combi;for(var i=0;i<COOKIE.combi_type.length;i++){combi_type=COOKIE.combi_type[i];combi=COOKIE.combi[combi_type];if(combi.stake>highest_stake){selected_bet=combi_type;highest_stake=combi.stake}};if(selected_bet=='none')if(leg_nums.length>0){selected_bet=0;BS_upd_sgl_stake(selected_bet,freebet_value)}else if(COOKIE.combi_type.length>0){selected_bet=COOKIE.combi_type[0].combi_type;BS_upd_type_stake(selected_bet,freebet_value)}else return false;document.forms[betslipbody.mainForm].elements['freebet_leg_or_type'].value=selected_bet;document.forms[betslipbody.mainForm].elements['freebet_token_id'].value=ct_id;return true}
function BS_deallocate_matchedbet_token(){var matchedbet_token_id=document.forms[betslipbody.mainForm].elements['matchedbet_token_id'].value,matchedbet_stake=document.forms[betslipbody.mainForm].elements['matchedbet_stake'].value,matchedbet_leg_or_type=document.forms[betslipbody.mainForm].elements['matchedbet_leg_or_type'].value;if(matchedbet_token_id!=""){var stake=BS_get_stake(matchedbet_leg_or_type);stake-=matchedbet_stake;BS_upd_sgl_stake(matchedbet_leg_or_type,stake,false);document.forms[betslipbody.mainForm].elements['matchedbet_token_id'].value="";document.forms[betslipbody.mainForm].elements['matchedbet_stake'].value="";document.forms[betslipbody.mainForm].elements['matchedbet_leg_or_type'].value=""}}
function BS_update_freebet(val){set_cookie(betslipbody.cookie_info.BET_FREEBET_COOKIE_NAME,val);BS_allocate_freebet_token();BS_upd_potential_winnings()}
function BS_clear_freebet_cookie(){set_cookie(betslipbody.cookie_info.BET_FREEBET_COOKIE_NAME,'')}
function BS_clear_fastbet_cookie(){set_cookie(betslipbody.cookie_info.BET_FAST_BET_COOKIE_NAME,"","","/")}
function BS_update_freebet_menu(){var val=get_cookie(betslipbody.cookie_info.BET_FREEBET_COOKIE_NAME);if(!val)return;var menu=document.getElementById('lstFreeBets');if(!menu){BS_clear_freebet_cookie();return};for(var i=0;i<menu.options.length;i++)if(menu.options[i].value==val){menu.options[i].selected='selected';return};BS_clear_freebet_cookie()}
function BS_get_freebet_token_value(){var f=document.forms[betslipbody.freebetsForm];if(!f)return null;var ct_id=f.elements['lstFreeBets'].value;if(ct_id=='')return null;var freebet_value=f.elements['value_'+ct_id].value;return freebet_value}
function BS_rearrange_legs(){if(betslipbody.cfg.BET_ADD_LEGS_AT!='AUTO')return;var elem=document.getElementById('betSelectionsScroll'),has_scrollbars=(elem!=null)&&(elem.clientHeight<elem.scrollHeight-4);if(!has_scrollbars)return;var new_legs=new Array(),leg_nums=BS_get_leg_nums();for(var leg_idx=0;leg_idx<leg_nums.length;leg_idx++){var leg_num=leg_nums[leg_idx],el=document.getElementById('is_new_sgl_'+leg_num);if(el==null||el.value!='1')continue;if(document.getElementById('is_scombi_sgl_'+leg_num).value=='1')continue;if(betslipbody.cfg.BET_SCOMBI_PART_ORDER=='DISP'&&document.getElementById('in_scombi_sgl_'+leg_num).value=='1')continue;new_legs.push(leg_num)};if(!new_legs.length)return;for(var i=new_legs.length-1;i>=0;i--)BS_move_leg_to_top(new_legs[i],true);BS_upd_cookie_leg_disporders();return}
function BS_move_leg_to_top(leg_num,skip_cookie_upd){var row_ids=BS_get_row_ids_for_leg(leg_num);if(!row_ids.length)return false;var first_row_in_leg=document.getElementById(row_ids[0]),tbody=first_row_in_leg.parentNode,first_row_in_table=tbody.firstChild;if(first_row_in_table.id='tr_plural')first_row_in_table=first_row_in_table.nextSibling;if(first_row_in_leg==first_row_in_table)return false;for(var i=0;i<row_ids.length;i++){row=document.getElementById(row_ids[i]);tbody.removeChild(row);tbody.insertBefore(row,first_row_in_table)};if(!skip_cookie_upd)BS_upd_cookie_leg_disporders();return true}
function BS_get_row_ids_for_leg(leg_num){var row_ids=new Array(),idx=1;while(true){var row_id='tr_sgl_'+leg_num+'_'+idx;if(document.getElementById(row_id)==null)break;row_ids.push(row_id);idx++};return row_ids}
function BS_upd_cookie_leg_disporders(){var found_leg_nums=new Array(),tbody=document.getElementById('betSelections').getElementsByTagName("tbody")[0],rows=tbody.getElementsByTagName("tr");for(var i=0;i<rows.length;i++){var row_id=rows[i].id,mtch=row_id.match(/^tr_sgl_([0-9]+)_1$/);if(mtch){leg_num=mtch[1];found_leg_nums.push(leg_num)}};var not_found_disporder=found_leg_nums.length,leg_nums=BS_get_leg_nums();for(var leg_idx=0;leg_idx<leg_nums.length;leg_idx++){var leg_num=leg_nums[leg_idx];COOKIE.leg[leg_num].disporder=not_found_disporder};var disporder=0;for(var leg_idx=0;leg_idx<found_leg_nums.length;leg_idx++){var leg_num=found_leg_nums[leg_idx];COOKIE.leg[leg_num].disporder=disporder++};BS_store_hash_cookie();return}
function BS_update_override(){var nb_selns=document.forms['overridesInfo'].elements.length;for(var i=0;i<nb_selns;i+=8){var ev_oc_id=document.forms['overridesInfo'].elements[i].value,lp_num=document.forms['overridesInfo'].elements[i+1].value,lp_den=document.forms['overridesInfo'].elements[i+2].value,hcap_str=document.forms['overridesInfo'].elements[i+3].value,hcap_value=document.forms['overridesInfo'].elements[i+4].value,leg_num=document.forms['overridesInfo'].elements[i+5].value,desc=document.forms['overridesInfo'].elements[i+6].value,desc_short=document.forms['overridesInfo'].elements[i+7].value;if(!SELN[ev_oc_id])SELN[ev_oc_id]=new BS_Seln();var seln=SELN[ev_oc_id];if(lp_num!=''&&lp_den!=''&&!seln.price.Equals(lp_num,lp_den)){seln.price.num=lp_num;seln.price.den=lp_den}else{seln.price.num=document.getElementById('price_num_sgl_'+leg_num).value;seln.price.den=document.getElementById('price_den_sgl_'+leg_num).value};if(hcap_value!=''&&seln.hcap!=hcap_value){seln.hcap=hcap_value}else seln.hcap=document.getElementById('hcap_sgl_'+leg_num).value;var sgl=COOKIE.leg[leg_num];if(hcap_str!=''&&sgl.hcap_value!=hcap_value){sgl.prev_hcap_value=sgl.hcap_value;sgl.hcap_value=hcap_value;document.getElementById('txt_sgl_oc_desc_short_disp_'+leg_num).innerHTML=desc_short+' ';document.getElementById('txt_sgl_oc_desc_short_hcap_'+leg_num).innerHTML=hcap_str;document.getElementById('txt_sgl_oc_desc_disp_'+leg_num).innerHTML=desc+' ';document.getElementById('txt_sgl_oc_desc_hcap_'+leg_num).innerHTML=hcap_str;document.getElementById('inf_sgl_oc_desc_disp_'+leg_num).innerHTML=desc+' ';document.getElementById('inf_sgl_oc_desc_hcap_'+leg_num).innerHTML=hcap_str;var hcap_icon_longer=document.getElementById('img_hcap_chg_longer_'+leg_num),hcap_icon_shorter=document.getElementById('img_hcap_chg_shorter_'+leg_num);if(sgl.prev_hcap_value<sgl.hcap_value){hcap_icon_longer.style.display='';hcap_icon_shorter.style.display='none'}else{hcap_icon_longer.style.display='none';hcap_icon_shorter.style.display=''}};sgl.prev_hcap_value=null;COOKIE.leg[leg_num].prev_hcap_value=null};var leg_nums=BS_get_leg_nums();for(var leg_idx=0;leg_idx<leg_nums.length;leg_idx++){var leg_num=leg_nums[leg_idx];if(COOKIE.leg[leg_num].selections.split('c').length!=1)continue;var sgl=COOKIE.leg[leg_num],seln=SELN[sgl.selections];if(seln.price.Equals(sgl.lp_num,sgl.lp_den))continue;var susp=document.getElementById('suspended_'+leg_num);if(susp!=null&&susp.value=='Y')continue;sgl.lp_num=seln.price.num;sgl.lp_den=seln.price.den;var disp_price=format_price(sgl.lp_num,sgl.lp_den);if(document.getElementById('txt_sgl_live_price_'+leg_num)!=null)document.getElementById('txt_sgl_live_price_'+leg_num).innerHTML=disp_price;var el_num=document.getElementById('price_num_sgl_'+leg_num),el_den=document.getElementById('price_den_sgl_'+leg_num),old_num=el_num.value,old_den=el_den.value;el_num.value=sgl.lp_num;el_den.value=sgl.lp_den;_BS_adjust_pot_rtn(leg_num,old_num,old_den,sgl.lp_num,sgl.lp_den);var odds_longer=(sgl.lp_num*old_den)>(sgl.lp_den*old_num),prc_icon_longer=document.getElementById('img_price_chg_longer_'+leg_num),prc_icon_shorter=document.getElementById('img_price_chg_shorter_'+leg_num);if(odds_longer){prc_icon_longer.style.display='';prc_icon_shorter.style.display='none'}else{prc_icon_longer.style.display='none';prc_icon_shorter.style.display=''}};BS_store_hash_cookie();BS_upd_potential_winnings()}
function update_use_gp(){if((document.getElementById('g_price_checkbox')&&document.getElementById('g_price_checkbox').checked)||(!document.getElementById('g_price_checkbox'))){document.getElementById('use_gp').value=true}else document.getElementById('use_gp').value=false}
function BS_show_modal(country_code,action,is_detached,cat_list){if(is_detached==1){var extra_url_params="ipbanning=1&cntry_code="+country_code+"&op_type="+action+"&cat_list="+cat_list;BS_pop_back(extra_url_params)}else{var url=window.location.href,redirect_url="";url=url.replace(/([&|\?]ipbanning=[^&]*)/,"");url=url.replace(/([&|\?]cntry_code=[^&]*)/,"");url=url.replace(/([&|\?]op_type=[^&]*)/,"");url=url.replace(/([&|\?]cat_list=[^&]*)/,"");if(url.search(/\?/)>-1){redirect_url=url+"&ipbanning=1&cntry_code="+country_code+"&op_type="+action+"&cat_list="+cat_list}else redirect_url=url+"?ipbanning=1&cntry_code="+country_code+"&op_type="+action+"&cat_list="+cat_list;window.location=redirect_url}};var post_bet_callbacks=[]
function BS_post_placement_callback(){for(var i=0;i<post_bet_callbacks.length;i++)post_bet_callbacks[i]()}
function BS_add_post_placement_callback(fn){post_bet_callbacks.push(fn)};var BS_LEG=new Array(),EXTRAINFO=new Array()
function BS_set_extra_info(name,value){EXTRAINFO[name]=value}
function BS_get_extra_info(p_name){return(EXTRAINFO[p_name])?EXTRAINFO[p_name]:''}
function BS_set_leg(name,value){BS_LEG[name]=value}
function BS_get_leg(p_name){return(BS_LEG[p_name])?BS_LEG[p_name]:''}
function BS_get_leg_format(){var leg_format=get_cookie(betslipheader.cookie_name.LEGFORMAT);if(leg_format=="")leg_format=betslipbody.cfg.LEG_FORMAT;return leg_format.split('|')}
function BS_upd_bet_count(num){var myBetCountElement=document.getElementById('bsCounter');if(myBetCountElement)if(num>1){myBetCountElement.innerHTML=betslipheader.msg.BS_SELECTIONS+"<span class='numBsSelections'>("+num+")</span>"}else myBetCountElement.innerHTML=betslipheader.msg.BS_SELECTION+"<span class='numBsSelections'>("+num+")</span>";document.forms['betslipCount'].bet_count.value=num}
function BS_is_on_receipt(){var cookie_str=get_cookie(betslipheader.cookie_name.RECEIPT);return(cookie_str!=null&&cookie_str.length>0)}
function BS_clear_receipt_cookie(){set_cookie(betslipheader.cookie_name.RECEIPT,'','',betslipheader.cookie_path,sports_cookie_domain,'')}
function BS_clear_seln_cookie(){set_cookie(betslipheader.cookie_name.LEG,'','',betslipheader.cookie_path,sports_cookie_domain,'')}
function BS_clear_bet_slip(){BS_upd_bet_count(0);BS_clear_seln_cookie();BS_upd_betslip();set_cookie("FASTBET_PROCESS","","","/");BS_clear_fastbet_cookie()}
function BS_go_bet(fast_bet){var bir_req_id=get_cookie("BIR_REQ_ID"),possible_placed_bet=get_cookie("POSSIBLE_PLACED_BET");if(!fast_bet&&(BS_is_on_receipt()||(bir_req_id==""&&possible_placed_bet==""))){set_cookie("FASTBET_PROCESS","","","/");BS_clear_fastbet_cookie()};if(BS_is_on_receipt()){BS_clear_receipt_cookie();if(!fast_bet)BS_clear_seln_cookie()};if(BS_selection_limit(1)){BS_LEG=new Array();return};var leg='',last_selection='',leg_params=BS_get_leg_format(),bet_origin=BS_get_leg("bet_origin");$j.each(leg_params,function(item){var v=BS_get_leg(leg_params[item]);if(v.length)v=v.replace(/\|/g,':');leg+='|'+leg_params[item]+'~'+v;if(leg_params[item]=="selections")last_selection=v});leg='&leg='+leg.substring(1);BS_LEG=new Array();var bs_style=get_pref('BETSLIP_STYLE'),url="",bet_uid="";if(bs_style=='Detached'){if(fast_bet){disable_fastbet_buttons_upd_cookie();url=betslipheader.url.REMOTE_BS_URL+'&go_place_fast_bet=1&bet_uid='+fastbet_betuid+leg;update_fastbet_uid();set_cookie("POSSIBLE_PLACED_BET","1","","/")}else url=betslipheader.url.REMOTE_BS_URL+'&bs_add_leg_to_slip=1'+leg;url+='&uid='+get_cookie(loginuid_cookie_name);BS_upd_pop_out(url)}else{if(fast_bet){disable_fastbet_buttons_upd_cookie();try{bet_uid=document.forms['betSlipMainForm'].elements['bet_uid'].value}catch(e){bet_uid=fastbet_betuid;update_fastbet_uid()};url=betslipheader.url.CGI_URL+'?action=GoBetPlace&go_place_fast_bet=1&bet_uid='+bet_uid+leg;set_cookie("POSSIBLE_PLACED_BET","1","","/")}else url=betslipheader.url.CGI_URL+'?action=GoBetAdd'+leg;url+='&uid='+get_cookie(loginuid_cookie_name);BS_view_betslip(url)}}
function update_fastbet_uid(){var url=betslipheader.url.CGI_URL+'?action=go_update_fastbet_betuid';$j.ajax({url:url,type:'GET',dataType:'text',success:function(text){fastbet_betuid=text}})}
function BS_upd_bet_count_from_slip(){var count=0,num_selns_elem=document.getElementById("num_selns");if(num_selns_elem)count=num_selns_elem.value;BS_upd_bet_count(count);return count};var BS_SELECTED_BETS=new Array()
function BS_select_bet(unique_id,group_unique_id){var bet,bet_exist=false,sel_bet;$j.each(BS_SELECTED_BETS,function(item){sel_bet=BS_SELECTED_BETS[item];if(sel_bet.unique_id==unique_id){sel_bet.place='Y';bet_exist=true;throw $break}});if(bet_exist)return true;bet=new Array();var leg_params=BS_get_leg_format(),leg_param;$j.each(leg_params,function(item){leg_param=leg_params[item];bet[leg_param]=BS_get_leg(leg_param)});BS_LEG=new Array();bet.unique_id=unique_id;bet.group_unique_id=group_unique_id;bet.place='Y';BS_SELECTED_BETS.push(bet)}
function BS_deselect_all_bets(group_unique_id){var sel_bet;if(group_unique_id){$j.each(BS_SELECTED_BETS,function(item){sel_bet=BS_SELECTED_BETS[item];if(sel_bet.group_unique_id==group_unique_id)sel_bet.place='N'})}else BS_SELECTED_BETS=new Array()}
function BS_go_bets(group_unique_id){var bet,url='',leg_params=BS_get_leg_format(),last_selection='';if(BS_is_on_receipt()){BS_clear_receipt_cookie();BS_clear_seln_cookie()};if(BS_selection_limit(BS_SELECTED_BETS.length)){BS_deselect_all_bets(group_unique_id);return};var leg='',sel_bet;$j.each(BS_SELECTED_BETS,function(item){sel_bet=BS_SELECTED_BETS[item];if(sel_bet.place!='Y')return;if(group_unique_id&&sel_bet.group_unique_id!=group_unique_id)return;leg='';var leg_param;$j.each(leg_params,function(item){leg_param=leg_params[item];leg+='|'+leg_param+'~'+sel_bet[leg_param];if(leg_param=="selections")last_selection=sel_bet[leg_param]});url+='&leg='+leg.substring(1)});var acc_stake=BS_get_extra_info("acc_stake");if(acc_stake!="")url=url+"&acc_stake="+acc_stake;var bettype_stake=BS_get_extra_info("bettype_stake");if(bettype_stake!="")url=url+"&bettype_stake="+bettype_stake;BS_deselect_all_bets(group_unique_id);var bs_style=get_pref('BETSLIP_STYLE');if(bs_style=='Detached'){url=betslipheader.url.REMOTE_BS_URL+'&bs_add_leg_to_slip=1'+url;BS_upd_pop_out(url)}else{var params='action=GoBetAdd'+url;BS_view_betslip(betslipheader.url.CGI_URL,params)}}
function BS_view_betslip(url,params){if(!params)params='';BS_load_betslip(url,'POST',params);BS_open_betslip()}
function BS_open_betslip(){var toggle_link=document.getElementById('toggleLink');if(toggle_link){toggle_link.href='javascript:BS_close_betslip()';toggle_link.className='betslip-is-maximised'};var bs=document.getElementById('betSlipBodyMembrane');bs.style.display='';var po=document.getElementById("popout");if(po!=null)po.style.display='block';if(get_pref('bs_minimized')!=0)set_pref('bs_minimized','0');var bsb=document.getElementById("bsScroller");bsb.style.position='';stickyBetslip();if(typeof livebetting!='undefined'&&livebetting==1)resize_betslip(livebetting_base_url)}
function BS_close_betslip(){var toggle_link=document.getElementById('toggleLink');if(toggle_link){toggle_link.href='javascript:BS_open_betslip()';toggle_link.className='betslip-is-minimised'};var bs=document.getElementById('betSlipBodyMembrane');bs.style.display='none';var po=document.getElementById("popout");if(po!=null)if(get_pref('BETSLIP_STYLE')=='Detached'){po.style.display='block'}else po.style.display='none';if(get_pref('bs_minimized')!=1)set_pref('bs_minimized','1');var bsb=document.getElementById("bsScroller");bsb.style.position='absolute';position_betslip();if(typeof livebetting!='undefined'&&livebetting==1)resize_betslip(livebetting_base_url)}
function position_betslip(){var bshl=document.getElementById("bsHeaderLeft"),bshr=document.getElementById("bsHeaderRight"),bsb=document.getElementById("bsScroller"),bsOA=document.getElementById("bsOpenAnchor"),isBIR=document.getElementById("contentBir")!==null,div_content=document.getElementById("content");bshl.style.display="none";if(!div_content)return;var bswidth=220,myWidth,scrollTop;if(document.documentElement&&document.documentElement.clientWidth!=0){scrollTop=document.documentElement.scrollTop;myWidth=document.documentElement.clientWidth}else{scrollTop=document.body.scrollTop;myWidth=document.body.clientWidth};var i_detached=false;if(!isBIR){var absleft=1e3-bswidth}else{var absleft=1247-bswidth;div_content.style.width="1255px";$j('div.main_content').css('padding-right','232px')};if(bsb)bsb.style.marginLeft=absleft+"px";bshl.style.marginLeft=absleft+"px";if((get_pref('bs_minimized')=='0')||(get_pref('bs_minimized')==null)){stickyBetslip()}else if(bsb)bsb.style.top="-28px";vsize_betslip()}
function getScrollTop(){if(typeof pageYOffset!="undefined"){return pageYOffset}else{var b=document.body,a=document.documentElement;a=(a.clientHeight)?a:b;return a.scrollTop}}
function stickyBetslip(){var bsb=document.getElementById("bsScroller"),div_content=document.getElementById("content"),isBIR=document.getElementById("contentBir")!==null,bshl=document.getElementById("bsHeaderLeft"),cookie_box=document.getElementById("cookie_box"),header_height=197;if(cookie_box&&cookie_box.style.display!='none')header_height=264;if(div_content&&bsb)if((get_pref('bs_minimized')=='0')){var myWidth=document.documentElement.clientWidth;bsb.style.position='fixed';var bswidth=220;bshl.style.display="none";var offsetTop_content=parseInt(div_content.offsetTop),offsetTop_BS=header_height-getScrollTop();if(offsetTop_BS<header_height)offsetTop_BS=header_height;bsb.style.top=offsetTop_BS+'px';var offsetLeft_content=parseInt(div_content.offsetLeft),offsetLeft_BS=parseInt(bsb.style.marginLeft);if(!isBIR){if(div_content.offsetWidth>=myWidth){bshl.style.display="none";bsb.style.marginLeft="782px";bshl.style.marginLeft="782px"}else if((myWidth-div_content.offsetWidth)>450){bshl.style.display="block";var offset=(myWidth-1007)/2,bsbleft=(1e3-bswidth)+offset+227,bshlleft=(1e3-bswidth);bsb.style.marginLeft=bsbleft+"px";bshl.style.marginLeft=bshlleft+"px"}else{bshl.style.display="none";var offset=(myWidth-1007)/2,bsbleft=(1e3-bswidth)+offset,bshlleft=(1e3-bswidth);bsb.style.marginLeft=bsbleft+"px";bshl.style.marginLeft=bshlleft+"px"}}else{div_content.style.width="1255px";$j('div.main_content').css('padding-right','232px');if(div_content.offsetWidth>=myWidth){bsb.style.marginLeft="1027px";bshl.style.marginLeft="1027px"}else{var offset=(myWidth-1248)/2,bsbleft=(1243-bswidth)+offset,bshlleft=(1243-bswidth)+4;bsb.style.marginLeft=bsbleft+"px";bshl.style.marginLeft=bshlleft+"px"}};bsb.style.marginLeft=bsbleft+"px";bshl.style.marginLeft=bshlleft+"px"}else{bsb.style.position='absolute';bsb.style.top='-28px'};vsize_betslip()}
function vsize_betslip(is_popout){var bs=document.getElementById("bsScroller"),bscroll=document.getElementById("betSelectionsScroll"),oscroll=document.getElementById("optionsScroll"),h=0,isIE=false;if(document.documentElement&&document.documentElement.clientHeight!=0){h=document.documentElement.clientHeight;isIE=true}else h=document.body.clientHeight;if(typeof livebetting!='undefined'&&livebetting==1)h=window.parent.document.documentElement.clientHeight;var solidheight=454,singlebetheight=40,singleoptionheight=30;if(document.getElementById("is_receipt")!=null){solidheight=594;singlebetheight=72;singleoptionheight=95};if(document.getElementById("is_bir_confirm")!=null)singlebetheight=70;if(get_pref('BETSLIP_STYLE')=='Detached')solidheight-=105;var betshare,optionshare,bscrollshare,oscrollshare;betcount=0;optioncount=0;optionshare=0;bscrollshare=0;oscrollshare=0;if(bscroll!=null){var bets=bscroll.getElementsByTagName("tr");if(bets.length>0){bscroll.className="has-selections"}else bscroll.className="";for(var b=0;b<bets.length;b++)if(bets[b].className=="bselection"||bets[b].className=="suspended")betcount++;betshare=betcount*singlebetheight;if(oscroll!=null){var options=oscroll.getElementsByTagName("tr");for(var o=0;o<options.length;o++)if(options[o].className=="boption")optioncount++;optionshare=optioncount*singleoptionheight};var totalshare=h-solidheight;bscrollshare=Math.floor(totalshare*(betshare/(betshare+optionshare)));oscrollshare=(totalshare-bscrollshare);if(window.getComputedStyle(bscroll)!=null){b_min_height=parseInt(window.getComputedStyle(bscroll).getPropertyValue('min-height'));bscrollshare=Math.max(b_min_height,bscrollshare)};if(oscroll!=null&&window.getComputedStyle(oscroll)!=null){o_min_height=parseInt(window.getComputedStyle(oscroll).getPropertyValue('min-height'));oscrollshare=Math.max(o_min_height,oscrollshare)};if(betcount>0&&(parseInt(239+bs.clientHeight)>h||bscroll.style.overflowY=="auto")){bscroll.style.height=bscrollshare+"px";bscroll.style.overflowY="auto";if(isIE==true)document.getElementById("betSelections").style.width="198px";bscroll.style.zIndex="0";if(document.getElementById("selectionHead")!=null)document.getElementById("selectionHead").style.width="70px";if(optionshare>oscrollshare){oscroll.style.height=oscrollshare+"px";oscroll.style.overflowY="auto";if(isIE==true)document.getElementById("options").style.width="198px";oscroll.style.zIndex=(parseInt(bscroll.style.zIndex)-1);if(document.getElementById("optionHead")!=null)document.getElementById("optionHead").style.width="120px"}};if(bscroll.scrollHeight<=bscroll.clientHeight){if(betcount==1){if(document.getElementById("is_receipt")!=null){bscroll.style.height="auto"}else{bscroll.style.height=(betshare*2)+"px";if(betcount==1){if((document.getElementById("selectionName").clientHeight)>=80)bscroll.style.height="auto";if(document.getElementById("gp_div")!=null)bscroll.style.height="auto";if(document.getElementById("bs_mbs_multichoice_select_0")!=null)bscroll.style.height="auto"}}}else bscroll.style.height="auto";bscroll.style.overflowY="";if(isIE==true)document.getElementById("betSelections").style.width="";if(document.getElementById("selectionHead")!=null)document.getElementById("selectionHead").style.width="";if(oscroll!=null){oscroll.style.height="auto";oscroll.style.overflowY="";if(isIE==true)document.getElementById("options").style.width="";if(document.getElementById("optionHead")!=null)document.getElementById("optionHead").style.width=""}}};if(typeof livebetting!='undefined'&&livebetting==1)resize_betslip(livebetting_base_url)}
function BS_upd_pop_out(url){popped_out_betslip=window.open(url,betslipheader.popup_name,'width=300,scrollbars=1,resizable=1,status=1');popped_out_betslip.focus();var fb_process=get_cookie('FASTBET_PROCESS');if(get_pref('BETSLIP_STYLE')=="Detached"&&fb_process&&fb_process=='1')try{var status_area=popped_out_betslip.document.getElementById('bsCounter');if(status_area)status_area.innerHTML="<img src='/img/betslip/loadbar.gif' style='width:90px;padding:4px 0' />"}catch(e){}}
function BS_pop_out(url_arg){var fb_process=get_cookie('FASTBET_PROCESS');if(fb_process&&fb_process=='1'){BS_clear_fastbet_cookie();enable_fastbet_buttons_upd_cookie()};var url=betslipheader.url.REMOTE_BS_URL;if(url_arg)url=url+"&"+url_arg;if(window.parent!=self)url=url+"&from_iframe=1";BS_upd_pop_out(url);set_pref('BETSLIP_STYLE','Detached');var bs=document.getElementById('bsScroller'),bshl=document.getElementById('bsHeaderLeft'),bsOA=document.getElementById('bsOpenAnchor');if(bs!=null){bs.style.display='none';if(bshl)bshl.style.display='none'};if(bshl)bshl.style.display='block';if(bsOA)bsOA.style.display='inline'};var opener_window
function BS_pop_back(extra_url_param){if(window.from_iframe==1){BS_pop_back_iframe(extra_url_param)}else BS_pop_back_main(extra_url_param)}
function BS_pop_back_main(extra_url_param){set_pref('BETSLIP_STYLE','Attached');var main_win_name='ppmain',fallback_url=betslipheader.url.CGI_URL,win_features='scrollbars=1,resizable=1,location=1,menubar=1,status=1,titlebar=1,toolbar=1';if(extra_url_param.length>0)fallback_url=fallback_url+"?"+extra_url_param;if(!opener_window)opener_window=window.opener;var opener_name;try{opener_name=opener_window.name}catch(e){opener_name='unknown'};if(opener_name=='PP_MediaCentre'){opener_window=opener_window.opener;try{opener_name=opener_window.name}catch(e){opener_name='unknown'}};if(!opener_window){opener_closed=true}else opener_closed=opener_window.closed;if(opener_closed){opener_window=window.open(fallback_url,main_win_name,win_features)}else if(opener_name!=main_win_name){if(opener_name=='unknown'){opener_window.location=fallback_url}else opener_window=window.open(fallback_url,main_win_name,win_features)}else if(opener_window.location.protocol.startsWith('https')){opener_window.location=fallback_url}else if(extra_url_param.length>0){var loc=opener_window.location.href;loc=loc.replace(/action=logout/,"");var pattern=new RegExp(/[&|\?]?(\w+)=[^&]*/g),param_names=[];while(match=pattern.exec(extra_url_param))param_names.push(match[1]);for(var i=0;i<param_names.length;i++){var pattern=new RegExp("&"+param_names[i]+"=[^&]*","g");loc=loc.replace(pattern,"");var pattern=new RegExp(param_names[i]+"=[^&]*","g");loc=loc.replace(pattern,"")};if(loc.search(/\?/)>-1){loc=loc+"&"+extra_url_param}else loc=loc+"?"+extra_url_param;opener_window.location.href=loc}else opener_window.location.reload();window.close()}
function BS_pop_back_iframe(extra_url_param){set_pref('BETSLIP_STYLE','Attached');var main_win_name='ppmain',fallback_url=betslipheader.url.CGI_URL,win_features='scrollbars=1,resizable=1,location=1,menubar=1,status=1,titlebar=1,toolbar=1';if(extra_url_param.length>0)fallback_url=fallback_url+"?"+extra_url_param;if(!opener_window)opener_window=window.opener;var opener_name;try{opener_name=opener_window.name}catch(e){if(e.description!=null&&e.description.toLowerCase().indexOf('permission denied')!==-1)opener_window=null;opener_name='unknown'};if(opener_window)try{opener_parent=opener_window.parent}catch(e){opener_parent=null};if(!opener_window||opener_parent==opener_window){opener_closed=true}else opener_closed=opener_window.closed;if(opener_closed){try{opener_window=window.open('',main_win_name);if(opener_window.location!='about:blank'){opener_window.location.reload()}else opener_window=window.open(fallback_url,main_win_name,win_features)}catch(e){opener_window=window.open(fallback_url,main_win_name,win_features)}}else if(opener_name=='unknown'){opener_window.location=fallback_url}else if(extra_url_param.length>0){var loc=opener_window.location.href;loc=loc.replace(/action=logout/,"");var pattern=new RegExp(/[&|\?]?(\w+)=[^&]*/g),param_names=[];while(match=pattern.exec(extra_url_param))param_names.push(match[1]);for(var i=0;i<param_names.length;i++){var pattern=new RegExp("&"+param_names[i]+"=[^&]*","g");loc=loc.replace(pattern,"");var pattern=new RegExp(param_names[i]+"=[^&]*","g");loc=loc.replace(pattern,"")};if(loc.search(/\?/)>-1){loc=loc+"&"+extra_url_param}else loc=loc+"?"+extra_url_param;opener_window.location.href=loc}else opener_window.location.reload();window.close()};var opener_window=null
function BS_open_in_main(url){var main_win_name='ppmain',win_features='scrollbars=1,resizable=1,location=1,menubar=1,status=1,titlebar=1,toolbar=1';if(!opener_window)opener_window=window.opener;var opener_name;try{opener_name=opener_window.name}catch(e){opener_name='unknown'};if(!opener_window){opener_closed=true}else opener_closed=opener_window.closed;if(opener_closed){opener_window=window.open(url,main_win_name,win_features)}else if(opener_name!=main_win_name){if(opener_name=='unknown'){opener_window.location=url}else opener_window=window.open(url,main_win_name,win_features)}else opener_window.location=url};var opener_window=null
function BS_go_register(inline,new_reg_screens,iframe_betslip){if(iframe_betslip){if(BrowserDetect.browser=="IE"&&BrowserDetect.version==7){var url=proto+"://"+livebetting_base_url+'/hi.php?iframe_betslip_register=1&inline='+inline+'&new_reg_screens='+new_reg_screens;document.getElementById("div_hidden_iframe_ext").src=url}else{var postMessageString="iframe_betslip_register|"+registration_iframe_pp_url_sb+"?inline="+inline+"&new_reg_screens="+new_reg_screens,destination_domain=proto+"://"+livebetting_base_url;parent.postMessage(postMessageString,destination_domain)};return false};if(!opener_window)opener_window=window.opener;try{if(inline){opener_window.go_register_inline(bus_channel)}else opener_window.go_register(bus_channel)}catch(e){if(new_reg_screens){var reg_url=betslipbody.url.SCGI_URL}else var reg_url=betslipbody.url.REG_URL;reg_url+='?action=go_register_popup&crea=img';reg_url+='&bus_channel='+bus_channel;if(new_reg_screens){window.open(reg_url);self.close()}else{location.replace(reg_url);window.resizeTo(640,662)}};return false}
function BS_submit_betslip(form,url){var f=document.forms[form],fc=f.cloneNode(false);if(!url||url=='')var url=fc.action;var method=fc.method;if(arguments.length>2)for(var i=2;i<arguments.length;i+=2)f.elements[arguments[i]].value=arguments[i+1];var ok=BS_submit_betslip_xmlhttprequest(url,getFormContent(form),method);if(!ok);}
function BS_req_end(from_ajax){var count=BS_upd_bet_count_from_slip();BS_update_freebet_menu();BS_init_show_hide();var bs_minimized,bs_style=get_pref('BETSLIP_STYLE'),fb_process=get_cookie('FASTBET_PROCESS');if(bs_style=='Detached'){bs_minimized=false}else if(fb_process&&fb_process=='1'){bs_minimized=false}else{bs_minimized=(get_pref('bs_minimized')=='1');if(from_ajax)bs_minimized=false;if(count==0)bs_minimized=true};if(!bs_minimized){BS_open_betslip()}else BS_close_betslip();var onload_func_elem=document.getElementById("onload_func");if(onload_func_elem)if(onload_func_elem.value!="")eval(onload_func_elem.value);var ioBB_onload_func_elem=document.getElementById("ioBB_snare"),ioBB_wait_elem=document.getElementById("ioBB_wait");if(ioBB_onload_func_elem&&ioBB_onload_func_elem.value!=""&&ioBB_wait_elem&&ioBB_wait_elem.value!=""){window.io_bbout_element_id="ioBB";window.io_install_flash=false;window.io_enable_rip=true;window.io_submit_element_id='betnow';window.io_max_wait=ioBB_wait_elem.value;var snare=document.createElement('script');snare.setAttribute("type","text/javascript");snare.setAttribute("src",ioBB_onload_func_elem.value);document.getElementsByTagName("head")[0].appendChild(snare)};if(!from_ajax)BS_test_possible_placed();if(window.attachEvent)ieDropDownFix();vsize_betslip();if(BS_is_on_receipt()){enable_fastbet_buttons_upd_cookie();BS_refresh_my_bets();BS_post_placement_callback()}}
function BS_refresh_my_bets(){if(window.refresh_my_bets){refresh_my_bets(1)}else if(window.opener)if(window.opener.refresh_my_bets){window.opener.refresh_my_bets(1)}else if(window.opener.opener)if(window.opener.opener.refresh_my_bets)window.opener.opener.refresh_my_bets(1)}
function BS_test_possible_placed(){var bir_req_id=get_cookie("BIR_REQ_ID"),possible_placed_bet=get_cookie("POSSIBLE_PLACED_BET");if(get_cookie("POSSIBLE_PLACED_BET")==1&&bir_req_id.match(/^[\d]+$/)==null){BS_display_error(betslipheader.msg.BS_PB_WARNING_TITLE,betslipheader.msg.BS_PB_WARNING_TXT);document.getElementById('close_text').innerHTML=betslipheader.msg.BS_ERROR_CLOSE;set_cookie("POSSIBLE_PLACED_BET","","","/");var fb_process=get_cookie('FASTBET_PROCESS');if(fb_process&&fb_process=='1')set_cookie("FASTBET_PROCESS","","","/")}else if(bir_req_id.match(/^[\d]+$/)!=null&&playing_bir_confirm!=1)BS_load_betslip(betslipbody.url.CGI_URL+'?action=GoBetSlip&retain=Y','POST')}
function BS_load_betslip(url,method,params){if(!params)params='';if(!method)method='POST';url=encodeURI(url);BS_submit_betslip_xmlhttprequest(url,params,method)}
function callInProgress(xmlhttp){if(!xmlhttp)return false;switch(xmlhttp.readyState){case 1:case 2:case 3:return true;break;default:return false;break}};var req=null,timeoutId=null
function BS_submit_betslip_xmlhttprequest(url,content,method){if(req==null)if(window.XMLHttpRequest){req=new XMLHttpRequest()}else if(window.ActiveXObject)req=new ActiveXObject('Microsoft.XMLHTTP');if(req){req.onreadystatechange=function(){if(req.readyState!=4)return false;window.clearTimeout(timeoutId);var reqStatus;try{reqStatus=req.status}catch(e){return false};if(reqStatus!=200){alert(betslipbody.msg.BS_AJAX_REQ_ERROR_TXT+"\n"+req.statusText);return false};var betSlipBodyMembrane=document.getElementById('betSlipBodyMembrane');betSlipBodyMembrane.innerHTML=req.responseText;BS_req_end(true);req=null};if(!callInProgress(req)){timeoutId=window.setTimeout(function(){if(callInProgress(req)){req.abort();BS_display_error(betslipheader.msg.BS_TIMEOUT_TITLE,betslipheader.msg.BS_TIMEOUT_TXT);return false}},parseInt(betslipheader.cfg.BETSLIP_REQ_TIMEOUT));var status_area=document.getElementById('bsCounter');if(status_area)status_area.innerHTML="<img src='//i.ppstatic.com/img/betslip/loadbar.gif' style='width:90px;padding:4px 0' />";req.open(method,url,true);req.setRequestHeader('content-type','application/x-www-form-urlencoded');if(betslipheader.url.HTTP_REFERER!="")req.setRequestHeader("Referer",betslipheader.url.HTTP_REFERER);req.send(content)}else{BS_display_error(betslipheader.msg.BS_LOADING,betslipheader.msg.BETSLIP_PLEASE_WAIT);return false}}else{BS_display_error(betslipheader.msg.BS_UNSUPPORTED_AJAX_TITLE,betslipheader.msg.BS_UNSUPPORTED_AJAX_TXT);return false};return true}
function BS_init_show_hide(){var bs_hide_sections=get_pref('bs_hide_sect');if(bs_hide_sections==null){bs_hide_sections=[]}else bs_hide_sections=bs_hide_sections.split(',');var all_sections=['selns','bopts'];for(var i=0;i<all_sections.length;i++){var section=all_sections[i],show=(bs_hide_sections.indexOf(section)==-1);BS_show_section(section,show,true)};return}
function BS_show_section(section,show,skip_pref_upd){var elem_to_show;if(section=='selns'){elem_to_show=document.getElementById('betSelectionsScroll')}else if(section=='bopts'){elem_to_show=document.getElementById('optionsScroll')}else throw'unknown section to show: '+section;if(elem_to_show!=null)elem_to_show.style.display=show?'':'none';var show_link=document.getElementById('bs_show_'+section+'_link'),hide_link=document.getElementById('bs_hide_'+section+'_link');if(show_link!=null)show_link.style.display=show?'none':'';if(hide_link!=null)hide_link.style.display=show?'':'none';if(!skip_pref_upd){var pref_name='bs_hide_sect',bs_hide_sections=get_pref(pref_name);if(bs_hide_sections==null){bs_hide_sections=[]}else bs_hide_sections=bs_hide_sections.split(',');var hide_list_posn=bs_hide_sections.indexOf(section);if(show&&hide_list_posn!=-1){bs_hide_sections=bs_hide_sections.without(section);set_pref(pref_name,bs_hide_sections.join(','))}else if(!show&&hide_list_posn==-1){bs_hide_sections.push(section);set_pref(pref_name,bs_hide_sections.join(','))}};if(typeof livebetting!='undefined'&&livebetting==1)resize_betslip(livebetting_base_url);return false}
function BS_selection_limit(n){var limit=20;if(limit<n){var title=betslipheader.msg.BS_EXCEED_SEL_TITLE,text=BS_js_subst(betslipheader.msg.BS_EXCEED_SEL_TEXT,{seln_limit:limit}),style=get_pref('BETSLIP_STYLE');if(!style||style=='Attached'){BS_display_error(title,text);BS_open_betslip()}else alert(text);return true};return false}
function bet_receipt_onload(){var bs_style=get_pref('BETSLIP_STYLE'),opener_window=this;if(bs_style=='Detached')opener_window=window.opener;opener_window.general_cookie.forceDecode();if(opener_window.ob.Cashout.onBetPlace)opener_window.ob.Cashout.onBetPlace()}
function check_fastbet_buttons(){var fb_process=get_cookie('FASTBET_PROCESS');if(fb_process&&fb_process=='1'){disable_fastbet_buttons()}else enable_fastbet_buttons()}
function enable_fastbet_buttons_upd_cookie(){set_cookie("FASTBET_PROCESS","","","/");enable_fastbet_buttons()}
function enable_fastbet_buttons(){if(typeof bir_top_displayed_page!='undefined'&&typeof fast_bet_active!='undefined'&&fast_bet_active&&(bir_top_displayed_page=='EVENT'||bir_top_displayed_page=='FINANCIALS'))betDisplayPref()}
function disable_fastbet_buttons_upd_cookie(){set_cookie("FASTBET_PROCESS","1","","/");disable_fastbet_buttons()}
function disable_fastbet_buttons(){if(typeof bir_top_displayed_page!='undefined'&&typeof fast_bet_active!='undefined'&&fast_bet_active&&(bir_top_displayed_page=='EVENT'||bir_top_displayed_page=='FINANCIALS'))betDisplayPref()}